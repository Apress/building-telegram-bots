/* Generated by Nim Compiler v0.18.0 */
/*   (c) 2018 Andreas Rumpf */
/* The generated code is subject to the original license. */
/* Compiled for: MacOSX, amd64, clang */
/* Command for C compiler:
   clang -c  -w  -I/Users/niko/projects/homebrew/Cellar/nim/0.18.0_1/nim/lib -o /Users/niko/Dropbox/BOOKS2/APRESS/02-nim/nimcache/stdlib_selectors.o /Users/niko/Dropbox/BOOKS2/APRESS/02-nim/nimcache/stdlib_selectors.c */
#define NIM_NEW_MANGLING_RULES
#define NIM_INTBITS 64

#include "nimbase.h"
#include <string.h>
#include <unistd.h>
#include <sys/types.h>
                       #include <sys/event.h>
                       #include <sys/time.h>
#include <sys/types.h>
                                      #include <sys/sysctl.h>
#include <sys/event.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <signal.h>
#include <time.h>
#include <errno.h>
#include <fcntl.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef powerpc
#undef unix
typedef struct tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct tySequence_uB9b75OUPRENsBAu4AnoePA tySequence_uB9b75OUPRENsBAu4AnoePA;
typedef struct tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g;
typedef struct tyObject_CellSeq_Axo1XVm9aaQueTOldv8le5w tyObject_CellSeq_Axo1XVm9aaQueTOldv8le5w;
typedef struct tyObject_GcHeap_1TRH1TZMaVZTnLNcIHuNFQ tyObject_GcHeap_1TRH1TZMaVZTnLNcIHuNFQ;
typedef struct tyObject_GcStack_7fytPA5bBsob6See21YMRA tyObject_GcStack_7fytPA5bBsob6See21YMRA;
typedef struct tyObject_MemRegion_x81NhDv59b8ercDZ9bi85jyg tyObject_MemRegion_x81NhDv59b8ercDZ9bi85jyg;
typedef struct tyObject_SmallChunk_tXn60W2f8h3jgAYdEmy5NQ tyObject_SmallChunk_tXn60W2f8h3jgAYdEmy5NQ;
typedef struct tyObject_BigChunk_Rv9c70Uhp2TytkX7eH78qEg tyObject_BigChunk_Rv9c70Uhp2TytkX7eH78qEg;
typedef struct tyObject_LLChunk_XsENErzHIZV9bhvyJx56wGw tyObject_LLChunk_XsENErzHIZV9bhvyJx56wGw;
typedef struct tyObject_IntSet_EZObFrE3NC9bIb3YMkY9crZA tyObject_IntSet_EZObFrE3NC9bIb3YMkY9crZA;
typedef struct tyObject_Trunk_W0r8S0Y3UGke6T9bIUWnnuw tyObject_Trunk_W0r8S0Y3UGke6T9bIUWnnuw;
typedef struct tyObject_AvlNode_IaqjtwKhxLEpvDS9bct9blEw tyObject_AvlNode_IaqjtwKhxLEpvDS9bct9blEw;
typedef struct tyObject_HeapLinks_PDV1HBZ8CQSQJC9aOBFNRSg tyObject_HeapLinks_PDV1HBZ8CQSQJC9aOBFNRSg;
typedef struct tyTuple_ujsjpB2O9cjj3uDHsXbnSzg tyTuple_ujsjpB2O9cjj3uDHsXbnSzg;
typedef struct tyObject_GcStat_0RwLoVBHZPfUAcLczmfQAg tyObject_GcStat_0RwLoVBHZPfUAcLczmfQAg;
typedef struct tyObject_CellSet_jG87P0AI9aZtss9ccTYBIISQ tyObject_CellSet_jG87P0AI9aZtss9ccTYBIISQ;
typedef struct tyObject_PageDesc_fublkgIY4LG3mT51LU2WHg tyObject_PageDesc_fublkgIY4LG3mT51LU2WHg;
typedef struct tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA;
typedef struct tySequence_aFT14fmnUl0dbEzr23F30g tySequence_aFT14fmnUl0dbEzr23F30g;
typedef struct tySequence_lKsVWjYqlRD7eN7MeIt2PQ tySequence_lKsVWjYqlRD7eN7MeIt2PQ;
typedef struct tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ;
typedef struct tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA;
typedef struct tySequence_lBAKjtL5n9bzoWNSpC1Vu3A tySequence_lBAKjtL5n9bzoWNSpC1Vu3A;
typedef struct tyObject_ReadyKey_vOvPQEijZeFv1xAgbh5rNw tyObject_ReadyKey_vOvPQEijZeFv1xAgbh5rNw;
typedef struct tyObject_StackTraceEntry_oLyohQ7O2XOvGnflOss8EA tyObject_StackTraceEntry_oLyohQ7O2XOvGnflOss8EA;
typedef struct tyObject_BaseChunk_Sdq7WpT6qAH858F5ZEdG3w tyObject_BaseChunk_Sdq7WpT6qAH858F5ZEdG3w;
typedef struct tyObject_FreeCell_u6M5LHprqzkn9axr04yg9bGQ tyObject_FreeCell_u6M5LHprqzkn9axr04yg9bGQ;
typedef int tyArray_SKEqGXcReU4NvbQlH779b5Q[2];
struct TGenericSeq {
NI len;
NI reserved;
};
struct NimStringDesc {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
typedef NU8 tyEnum_TNimKind_jIBKr1ejBgsfM33Kxw4j7A;
typedef NU8 tySet_tyEnum_TNimTypeFlag_v8QUszD1sWlSIWZz7mC4bQ;
typedef N_NIMCALL_PTR(void, tyProc_ojoeKfW4VYIm36I9cpDTQIg) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, tyProc_WSm2xU5ARYv9aAR4l0z9c9auQ) (void* p);
struct TNimType {
NI size;
tyEnum_TNimKind_jIBKr1ejBgsfM33Kxw4j7A kind;
tySet_tyEnum_TNimTypeFlag_v8QUszD1sWlSIWZz7mC4bQ flags;
TNimType* base;
TNimNode* node;
void* finalizer;
tyProc_ojoeKfW4VYIm36I9cpDTQIg marker;
tyProc_WSm2xU5ARYv9aAR4l0z9c9auQ deepcopy;
};
struct RootObj {
TNimType* m_type;
};
struct Exception {
  RootObj Sup;
Exception* parent;
NCSTRING name;
NimStringDesc* message;
tySequence_uB9b75OUPRENsBAu4AnoePA* trace;
Exception* up;
};
struct tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg {
  Exception Sup;
};
typedef NU8 tyEnum_TNimNodeKind_unfNsxrcATrufDZmpBq4HQ;
struct TNimNode {
tyEnum_TNimNodeKind_unfNsxrcATrufDZmpBq4HQ kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g {
NI refcount;
TNimType* typ;
};
struct tyObject_GcStack_7fytPA5bBsob6See21YMRA {
void* bottom;
};
struct tyObject_CellSeq_Axo1XVm9aaQueTOldv8le5w {
NI len;
NI cap;
tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g** d;
};
typedef tyObject_SmallChunk_tXn60W2f8h3jgAYdEmy5NQ* tyArray_SiRwrEKZdLgxqz9a9aoVBglg[512];
typedef NU32 tyArray_BHbOSqU1t9b3Gt7K2c6fQig[24];
typedef tyObject_BigChunk_Rv9c70Uhp2TytkX7eH78qEg* tyArray_N1u1nqOgmuJN9cSZrnMHgOQ[32];
typedef tyArray_N1u1nqOgmuJN9cSZrnMHgOQ tyArray_B6durA4ZCi1xjJvRtyYxMg[24];
typedef tyObject_Trunk_W0r8S0Y3UGke6T9bIUWnnuw* tyArray_lh2A89ahMmYg9bCmpVaplLbA[256];
struct tyObject_IntSet_EZObFrE3NC9bIb3YMkY9crZA {
tyArray_lh2A89ahMmYg9bCmpVaplLbA data;
};
typedef tyObject_AvlNode_IaqjtwKhxLEpvDS9bct9blEw* tyArray_0aOLqZchNi8nWtMTi8ND8w[2];
struct tyObject_AvlNode_IaqjtwKhxLEpvDS9bct9blEw {
tyArray_0aOLqZchNi8nWtMTi8ND8w link;
NI key;
NI upperBound;
NI level;
};
struct tyTuple_ujsjpB2O9cjj3uDHsXbnSzg {
tyObject_BigChunk_Rv9c70Uhp2TytkX7eH78qEg* Field0;
NI Field1;
};
typedef tyTuple_ujsjpB2O9cjj3uDHsXbnSzg tyArray_LzOv2eCDGiceMKQstCLmhw[30];
struct tyObject_HeapLinks_PDV1HBZ8CQSQJC9aOBFNRSg {
NI len;
tyArray_LzOv2eCDGiceMKQstCLmhw chunks;
tyObject_HeapLinks_PDV1HBZ8CQSQJC9aOBFNRSg* next;
};
struct tyObject_MemRegion_x81NhDv59b8ercDZ9bi85jyg {
NI minLargeObj;
NI maxLargeObj;
tyArray_SiRwrEKZdLgxqz9a9aoVBglg freeSmallChunks;
NU32 flBitmap;
tyArray_BHbOSqU1t9b3Gt7K2c6fQig slBitmap;
tyArray_B6durA4ZCi1xjJvRtyYxMg matrix;
tyObject_LLChunk_XsENErzHIZV9bhvyJx56wGw* llmem;
NI currMem;
NI maxMem;
NI freeMem;
NI occ;
NI lastSize;
tyObject_IntSet_EZObFrE3NC9bIb3YMkY9crZA chunkStarts;
tyObject_AvlNode_IaqjtwKhxLEpvDS9bct9blEw* root;
tyObject_AvlNode_IaqjtwKhxLEpvDS9bct9blEw* deleted;
tyObject_AvlNode_IaqjtwKhxLEpvDS9bct9blEw* last;
tyObject_AvlNode_IaqjtwKhxLEpvDS9bct9blEw* freeAvlNodes;
NIM_BOOL locked;
NIM_BOOL blockChunkSizeIncrease;
NI nextChunkSize;
tyObject_AvlNode_IaqjtwKhxLEpvDS9bct9blEw bottomData;
tyObject_HeapLinks_PDV1HBZ8CQSQJC9aOBFNRSg heapLinks;
};
struct tyObject_GcStat_0RwLoVBHZPfUAcLczmfQAg {
NI stackScans;
NI cycleCollections;
NI maxThreshold;
NI maxStackSize;
NI maxStackCells;
NI cycleTableSize;
NI64 maxPause;
};
struct tyObject_CellSet_jG87P0AI9aZtss9ccTYBIISQ {
NI counter;
NI max;
tyObject_PageDesc_fublkgIY4LG3mT51LU2WHg* head;
tyObject_PageDesc_fublkgIY4LG3mT51LU2WHg** data;
};
struct tyObject_GcHeap_1TRH1TZMaVZTnLNcIHuNFQ {
tyObject_GcStack_7fytPA5bBsob6See21YMRA stack;
NI cycleThreshold;
tyObject_CellSeq_Axo1XVm9aaQueTOldv8le5w zct;
tyObject_CellSeq_Axo1XVm9aaQueTOldv8le5w decStack;
tyObject_CellSeq_Axo1XVm9aaQueTOldv8le5w tempStack;
NI recGcLock;
tyObject_MemRegion_x81NhDv59b8ercDZ9bi85jyg region;
tyObject_GcStat_0RwLoVBHZPfUAcLczmfQAg stat;
tyObject_CellSet_jG87P0AI9aZtss9ccTYBIISQ marked;
tyObject_CellSeq_Axo1XVm9aaQueTOldv8le5w additionalRoots;
NI gcThreadId;
};
struct tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g {
int rfd;
int wfd;
};
struct tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA {
int kqFD;
NI maxFD;
tySequence_aFT14fmnUl0dbEzr23F30g* changes;
tySequence_lKsVWjYqlRD7eN7MeIt2PQ* fds;
NI count;
int sock;
};
typedef NU32 tySet_tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg;
struct tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA {
tySequence_lBAKjtL5n9bzoWNSpC1Vu3A* readList;
tySequence_lBAKjtL5n9bzoWNSpC1Vu3A* writeList;
};
struct tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ {
NI ident;
tySet_tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg events;
NI param;
tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA data;
};
typedef NU8 tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg;
typedef NU8 tyEnum_TNimTypeFlag_v8QUszD1sWlSIWZz7mC4bQ;
typedef NU8 tyEnum_WalkOp_Wfy7gT5VQ8B3aJBxqU8D9cQ;
typedef N_NOCONV_PTR(void, tyProc_lfH2drpqP9aSEAAjWgrYv8Q) (int x);
typedef struct kevent tyArray_80NdCG41SyhPocFo20IbDw[64];
struct tyObject_ReadyKey_vOvPQEijZeFv1xAgbh5rNw {
NI fd;
tySet_tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg events;
NI32 errorCode;
};
struct tyObject_StackTraceEntry_oLyohQ7O2XOvGnflOss8EA {
NCSTRING procname;
NI line;
NCSTRING filename;
};
struct tyObject_BaseChunk_Sdq7WpT6qAH858F5ZEdG3w {
NI prevSize;
NI size;
};
struct tyObject_SmallChunk_tXn60W2f8h3jgAYdEmy5NQ {
  tyObject_BaseChunk_Sdq7WpT6qAH858F5ZEdG3w Sup;
tyObject_SmallChunk_tXn60W2f8h3jgAYdEmy5NQ* next;
tyObject_SmallChunk_tXn60W2f8h3jgAYdEmy5NQ* prev;
tyObject_FreeCell_u6M5LHprqzkn9axr04yg9bGQ* freeList;
NI free;
NI acc;
NF data;
};
struct tyObject_BigChunk_Rv9c70Uhp2TytkX7eH78qEg {
  tyObject_BaseChunk_Sdq7WpT6qAH858F5ZEdG3w Sup;
tyObject_BigChunk_Rv9c70Uhp2TytkX7eH78qEg* next;
tyObject_BigChunk_Rv9c70Uhp2TytkX7eH78qEg* prev;
NF data;
};
struct tyObject_LLChunk_XsENErzHIZV9bhvyJx56wGw {
NI size;
NI acc;
tyObject_LLChunk_XsENErzHIZV9bhvyJx56wGw* next;
};
typedef NI tyArray_9a8QARi5WsUggNU9bom7kzTQ[8];
struct tyObject_Trunk_W0r8S0Y3UGke6T9bIUWnnuw {
tyObject_Trunk_W0r8S0Y3UGke6T9bIUWnnuw* next;
NI key;
tyArray_9a8QARi5WsUggNU9bom7kzTQ bits;
};
struct tyObject_PageDesc_fublkgIY4LG3mT51LU2WHg {
tyObject_PageDesc_fublkgIY4LG3mT51LU2WHg* next;
NI key;
tyArray_9a8QARi5WsUggNU9bom7kzTQ bits;
};
typedef struct {
N_NIMCALL_PTR(NIM_BOOL, ClP_0) (int fd, void* ClE_0);
void* ClE_0;
} tyProc_9cnjNsE9aOh8FkRG9ccBKTpWg;
struct tyObject_FreeCell_u6M5LHprqzkn9axr04yg9bGQ {
tyObject_FreeCell_u6M5LHprqzkn9axr04yg9bGQ* next;
NI zeroField;
};
struct tySequence_aFT14fmnUl0dbEzr23F30g {
  TGenericSeq Sup;
  struct kevent data[SEQ_DECL_SIZE];
};
struct tySequence_lKsVWjYqlRD7eN7MeIt2PQ {
  TGenericSeq Sup;
  tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ data[SEQ_DECL_SIZE];
};
struct tySequence_uB9b75OUPRENsBAu4AnoePA {
  TGenericSeq Sup;
  tyObject_StackTraceEntry_oLyohQ7O2XOvGnflOss8EA data[SEQ_DECL_SIZE];
};
struct tySequence_lBAKjtL5n9bzoWNSpC1Vu3A {
  TGenericSeq Sup;
  tyProc_9cnjNsE9aOh8FkRG9ccBKTpWg data[SEQ_DECL_SIZE];
};
static N_INLINE(void, setNonBlocking_MR9caCk0HOe6tVDYIV6sjgAselectors)(int fd);
N_LIB_PRIVATE N_NIMCALL(void, setBlocking_RBApwF6paZ4dy39bsxU85TA)(int s, NIM_BOOL blocking);
static N_INLINE(void, nimFrame)(TFrame* s);
N_LIB_PRIVATE N_NOINLINE(void, stackOverflow_II46IjNZztN9bmbxUD8dt8g)(void);
static N_INLINE(void, popFrame)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g*, newSelectEvent_yPg79aKB2t4d8AebPbhDJmg)(void);
N_LIB_PRIVATE N_NIMCALL(void, raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ)(NI32 message);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src);
N_LIB_PRIVATE N_NIMCALL(NimStringDesc*, osErrorMsg_yWvWz5V6Ib7QshcAbOiDeQ)(NI32 errorCode);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
static N_INLINE(void, copyMem_E1xtACub5WcDa3vbrIXbwgsystem)(void* dest, void* source, NI size);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI x);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* dest, NI addlen);
N_NIMCALL(void, nimGCvisit)(void* d, NI op);
static N_NIMCALL(void, Marker_tyRef_yREHAUxoe4I2puy9cJ9cMatg)(void* p, NI op);
N_NIMCALL(void*, newObj)(TNimType* typ, NI size);
N_NIMCALL(NimStringDesc*, copyStringRC1)(NimStringDesc* src);
static N_INLINE(void, nimGCunrefNoCycle)(void* p);
static N_INLINE(tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g*, usrToCell_yB9aH5WIlwd0xkYrcdPeXrQsystem)(void* usr);
static N_INLINE(void, rtlAddZCT_MV4BBk6J1qu70IbBxwEn4w_2system)(tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* c);
N_LIB_PRIVATE N_NOINLINE(void, addZCT_fCDI7oO1NNVXXURtxSzsRw)(tyObject_CellSeq_Axo1XVm9aaQueTOldv8le5w* s, tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* c);
static N_INLINE(void, asgnRef)(void** dest, void* src);
static N_INLINE(void, incRef_9cAA5YuQAAC3MVbnGeV86swsystem)(tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* c);
static N_INLINE(void, decRef_MV4BBk6J1qu70IbBxwEn4wsystem)(tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* c);
N_NIMCALL(void, raiseException)(Exception* e, NCSTRING ename);
N_LIB_PRIVATE N_NIMCALL(NI32, osLastError_tNPXXFl9cb3BG0pJKzUn9bew)(void);
N_LIB_PRIVATE N_NOCONV(void*, allocShared0_sVm4rDImKK2ZDdylByayiA_4)(NI size);
static N_INLINE(NI, chckRange)(NI i, NI a, NI b);
N_NOINLINE(void, raiseRangeError)(NI64 val);
N_LIB_PRIVATE N_NIMCALL(void, trigger_trDKG82w8lu69cS7ELKcDiA)(tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g* ev);
N_LIB_PRIVATE N_NIMCALL(void, close_trDKG82w8lu69cS7ELKcDiA_2)(tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g* ev);
N_LIB_PRIVATE N_NOCONV(void, deallocShared_RCjNtRnHdRYntrcE7YtwWw_2)(void* p);
N_LIB_PRIVATE N_NIMCALL(void, setEvent_trDKG82w8lu69cS7ELKcDiA_3)(tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g* ev);
static N_NIMCALL(void, Marker_tySequence_aFT14fmnUl0dbEzr23F30g)(void* p, NI op);
static N_NIMCALL(void, Marker_tySequence_lKsVWjYqlRD7eN7MeIt2PQ)(void* p, NI op);
static N_NIMCALL(void, Marker_tyRef_eV1HoGAGYVaJgQ5BCEf67g)(void* p, NI op);
N_LIB_PRIVATE N_NIMCALL(tySequence_lKsVWjYqlRD7eN7MeIt2PQ*, newSeq_ReBdb9aYcfG8RblsLwUT5zw)(NI len);
N_NIMCALL(void*, nimNewSeqOfCap)(TNimType* typ, NI cap);
static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src);
N_LIB_PRIVATE N_NIMCALL(void, raiseIOSelectorsError_o9b1ajHBhCZ9cfHDVe9aM1OwA)(NimStringDesc* message);
N_NOINLINE(void, raiseIndexError)(void);
N_LIB_PRIVATE N_NOINLINE(void, raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2)(NimStringDesc* msg);
N_NIMCALL(void, genericSeqAssign)(void* dest, void* src, TNimType* mt);
N_NIMCALL(TGenericSeq*, incrSeqV2)(TGenericSeq* seq, NI elemSize);
static N_INLINE(NI, addInt)(NI a, NI b);
N_NOINLINE(void, raiseOverflow)(void);
static N_INLINE(TGenericSeq*, setLengthSeq)(TGenericSeq* seq, NI elemSize, NI newLen);
static N_INLINE(NI, resize_bzF9a0JivP3Z4njqaxuLc5wsystem)(NI old);
N_LIB_PRIVATE N_NIMCALL(void*, growObj_AVYny8c0GTk28gxjmat1MA)(void* old, NI newsize);
N_NIMCALL(TNimType*, extGetCellType)(void* c);
N_LIB_PRIVATE N_NIMCALL(void, forAllChildrenAux_YOI1Uo54H9aas13WthjhsfA)(void* dest, TNimType* mt, tyEnum_WalkOp_Wfy7gT5VQ8B3aJBxqU8D9cQ op);
static N_INLINE(void, zeroMem_t0o5XqKanO5QJfXMGEzp2Asystem)(void* p, NI size);
static N_INLINE(NI, subInt)(NI a, NI b);
static N_INLINE(NIM_BOOL, contains_Fq69aUQLu9cabGUhLgQogmXgasyncdispatch)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, NI fd);
N_LIB_PRIVATE N_NIMCALL(NimStringDesc*, nsuFormatSingleElem)(NimStringDesc* formatstr, NimStringDesc* a);
static N_INLINE(NI, divInt)(NI a, NI b);
N_NOINLINE(void, raiseDivByZero)(void);
N_NIMCALL(NI, mulInt)(NI a, NI b);
N_NOINLINE(void, chckNil)(void* p);
static N_INLINE(NI, getUnique_GbtpxJ9a1px9cRFswYIdc1GAselectors)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s);
extern TFrame* framePtr_HRfVMH3jYeBJz6Q6X9b6Ptw;
extern TNimType NTI_bAvOj2UcojKN87yAQLs0aw_;
TNimType NTI_0onfiGw9bxynoOBJJC01SAg_;
TNimType NTI_yREHAUxoe4I2puy9cJ9cMatg_;
extern tyObject_GcHeap_1TRH1TZMaVZTnLNcIHuNFQ gch_IcYaEuuWivYAS86vFMTS3Q;
TNimType NTI_VF2QWbk9cEn13YFg9btPwWLA_;
extern TNimType NTI_nlCscttRCss70IBTyuBqnA_;
extern TNimType NTI_rR5Bzr1D5krxoo1NcNyeMA_;
extern TNimType NTI_9cG9coEVt8bUEuxUupPPZigQ_;
TNimType NTI_aFT14fmnUl0dbEzr23F30g_;
TNimType NTI_6oh6PoZxxmRrkez9bmwfPdQ_;
TNimType NTI_nI40bZzTyYVrl763dZ9aHDg_;
TNimType NTI_YIRsZrDT89buh37M5yeUgng_;
extern TNimType NTI_hOYUN4IOpj9adMwn6W7S2VA_;
TNimType NTI_lKsVWjYqlRD7eN7MeIt2PQ_;
TNimType NTI_eV1HoGAGYVaJgQ5BCEf67g_;
extern TNimType NTI_lBAKjtL5n9bzoWNSpC1Vu3A_;
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_2, "", 0);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_3, " (code: ", 8);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_4, ")", 1);
NIM_CONST tyArray_SKEqGXcReU4NvbQlH779b5Q TM_ln5vuDpFyDrAqQbYD2g52Q_10 = {((int) 1),
((int) 29)}
;
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_11, "Maximum number of descriptors is exhausted!", 43);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_12, "s.fds[fdi].ident == 0 ", 22);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_15, "\012not (pkey.ident == 0) Descriptor [", 35);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_16, "] is not registered in the queue!", 33);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_24, "\012not (pkey.ident == 0) Event is not registered in the queue!", 60);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_25, "contains(pkey.events, User) ", 28);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_27, "\012not (pkey.ident == 0) ", 23);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_28, "Descriptor $# is not registered in the queue!", 45);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_29, "pkey.events * maskEvents == {} ", 31);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_40, "true Unsupported kqueue filter in the queue!", 44);
STRING_LITERAL(TM_ln5vuDpFyDrAqQbYD2g52Q_53, "s.fds[fdi].ident == 0 Event is already registered in the queue!", 63);

static N_INLINE(void, nimFrame)(TFrame* s) {
	NI T1_;
	T1_ = (NI)0;
	{
		if (!(framePtr_HRfVMH3jYeBJz6Q6X9b6Ptw == NIM_NIL)) goto LA4_;
		T1_ = ((NI) 0);
	}
	goto LA2_;
	LA4_: ;
	{
		T1_ = ((NI) ((NI16)((*framePtr_HRfVMH3jYeBJz6Q6X9b6Ptw).calldepth + ((NI16) 1))));
	}
	LA2_: ;
	(*s).calldepth = ((NI16) (T1_));
	(*s).prev = framePtr_HRfVMH3jYeBJz6Q6X9b6Ptw;
	framePtr_HRfVMH3jYeBJz6Q6X9b6Ptw = s;
	{
		if (!((*s).calldepth == ((NI16) 2000))) goto LA9_;
		stackOverflow_II46IjNZztN9bmbxUD8dt8g();
	}
	LA9_: ;
}

static N_INLINE(void, popFrame)(void) {
	framePtr_HRfVMH3jYeBJz6Q6X9b6Ptw = (*framePtr_HRfVMH3jYeBJz6Q6X9b6Ptw).prev;
}

static N_INLINE(void, setNonBlocking_MR9caCk0HOe6tVDYIV6sjgAselectors)(int fd) {
	nimfr_("setNonBlocking", "selectors.nim");
	nimln_(276, "selectors.nim");
	setBlocking_RBApwF6paZ4dy39bsxU85TA(fd, NIM_FALSE);
	popFrame();
}

static N_INLINE(void, copyMem_E1xtACub5WcDa3vbrIXbwgsystem)(void* dest, void* source, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest, source, ((size_t) (size)));
}

static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	copyMem_E1xtACub5WcDa3vbrIXbwgsystem(((void*) ((&(*dest).data[((*dest).Sup.len)- 0]))), ((void*) ((*src).data)), ((NI) ((NI)((*src).Sup.len + ((NI) 1)))));
	(*dest).Sup.len += (*src).Sup.len;
}
static N_NIMCALL(void, Marker_tyRef_yREHAUxoe4I2puy9cJ9cMatg)(void* p, NI op) {
	tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg* a;
	a = (tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg*)p;
	nimGCvisit((void*)(*a).Sup.parent, op);
	nimGCvisit((void*)(*a).Sup.message, op);
	nimGCvisit((void*)(*a).Sup.trace, op);
	nimGCvisit((void*)(*a).Sup.up, op);
}

static N_INLINE(tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g*, usrToCell_yB9aH5WIlwd0xkYrcdPeXrQsystem)(void* usr) {
	tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* result;
	nimfr_("usrToCell", "gc.nim");
	result = (tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g*)0;
	nimln_(132, "gc.nim");
	result = ((tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g*) ((NI)((NU64)(((NI) (ptrdiff_t) (usr))) - (NU64)(((NI)sizeof(tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g))))));
	popFrame();
	return result;
}

static N_INLINE(void, rtlAddZCT_MV4BBk6J1qu70IbBxwEn4w_2system)(tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* c) {
	nimfr_("rtlAddZCT", "gc.nim");
	nimln_(211, "gc.nim");
	addZCT_fCDI7oO1NNVXXURtxSzsRw((&gch_IcYaEuuWivYAS86vFMTS3Q.zct), c);
	popFrame();
}

static N_INLINE(void, nimGCunrefNoCycle)(void* p) {
	tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* c;
	nimfr_("nimGCunrefNoCycle", "gc.nim");
	nimln_(250, "gc.nim");
	c = usrToCell_yB9aH5WIlwd0xkYrcdPeXrQsystem(p);
	nimln_(252, "gc.nim");
	{
		(*c).refcount -= ((NI) 8);
		if (!((NU64)((*c).refcount) < (NU64)(((NI) 8)))) goto LA3_;
		nimln_(253, "gc.nim");
		rtlAddZCT_MV4BBk6J1qu70IbBxwEn4w_2system(c);
	}
	LA3_: ;
	popFrame();
}

static N_INLINE(void, incRef_9cAA5YuQAAC3MVbnGeV86swsystem)(tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* c) {
	nimfr_("incRef", "gc.nim");
	nimln_(191, "gc.nim");
	(*c).refcount = (NI)((NU64)((*c).refcount) + (NU64)(((NI) 8)));
	popFrame();
}

static N_INLINE(void, decRef_MV4BBk6J1qu70IbBxwEn4wsystem)(tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* c) {
	nimfr_("decRef", "gc.nim");
	nimln_(218, "gc.nim");
	{
		(*c).refcount -= ((NI) 8);
		if (!((NU64)((*c).refcount) < (NU64)(((NI) 8)))) goto LA3_;
		nimln_(219, "gc.nim");
		rtlAddZCT_MV4BBk6J1qu70IbBxwEn4w_2system(c);
	}
	LA3_: ;
	popFrame();
}

static N_INLINE(void, asgnRef)(void** dest, void* src) {
	nimfr_("asgnRef", "gc.nim");
	nimln_(264, "gc.nim");
	{
		tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* T5_;
		nimln_(398, "system.nim");
		nimln_(264, "gc.nim");
		if (!!((src == NIM_NIL))) goto LA3_;
		T5_ = (tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g*)0;
		T5_ = usrToCell_yB9aH5WIlwd0xkYrcdPeXrQsystem(src);
		incRef_9cAA5YuQAAC3MVbnGeV86swsystem(T5_);
	}
	LA3_: ;
	nimln_(265, "gc.nim");
	{
		tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* T10_;
		nimln_(398, "system.nim");
		nimln_(265, "gc.nim");
		if (!!(((*dest) == NIM_NIL))) goto LA8_;
		T10_ = (tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g*)0;
		T10_ = usrToCell_yB9aH5WIlwd0xkYrcdPeXrQsystem((*dest));
		decRef_MV4BBk6J1qu70IbBxwEn4wsystem(T10_);
	}
	LA8_: ;
	nimln_(266, "gc.nim");
	(*dest) = src;
	popFrame();
}

N_LIB_PRIVATE N_NIMCALL(void, raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ)(NI32 message) {
	NimStringDesc* msg;
	NimStringDesc* T1_;
	NimStringDesc* T2_;
	NimStringDesc* T3_;
	tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg* err;
	tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg* e;
	NimStringDesc* T4_;
	nimfr_("raiseIOSelectorsError", "selectors.nim");
	nimln_(265, "selectors.nim");
	msg = copyString(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_2));
	nimln_(269, "selectors.nim");
	T1_ = (NimStringDesc*)0;
	T2_ = (NimStringDesc*)0;
	T2_ = osErrorMsg_yWvWz5V6Ib7QshcAbOiDeQ(message);
	T3_ = (NimStringDesc*)0;
	T3_ = nimIntToStr(((NI) (message)));
	T1_ = rawNewString(T2_->Sup.len + T3_->Sup.len + 9);
appendString(T1_, T2_);
appendString(T1_, ((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_3));
appendString(T1_, T3_);
appendString(T1_, ((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_4));
	msg = resizeString(msg, T1_->Sup.len + 0);
appendString(msg, T1_);
	nimln_(272, "selectors.nim");
	e = (tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg*)0;
	nimln_(2811, "system.nim");
	e = (tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg*) newObj((&NTI_yREHAUxoe4I2puy9cJ9cMatg_), sizeof(tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg));
	(*e).Sup.Sup.m_type = (&NTI_0onfiGw9bxynoOBJJC01SAg_);
	nimln_(272, "selectors.nim");
	T4_ = (NimStringDesc*)0;
	T4_ = (*e).Sup.message; (*e).Sup.message = copyStringRC1(msg);
	if (T4_) nimGCunrefNoCycle(T4_);
	nimln_(2806, "system.nim");
	asgnRef((void**) (&(*e).Sup.parent), NIM_NIL);
	err = e;
	nimln_(273, "selectors.nim");
	raiseException((Exception*)err, "IOSelectorsException");
	popFrame();
}

static N_INLINE(NI, chckRange)(NI i, NI a, NI b) {
	NI result;
{	result = (NI)0;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (a <= i);
		if (!(T3_)) goto LA4_;
		T3_ = (i <= b);
		LA4_: ;
		if (!T3_) goto LA5_;
		result = i;
		goto BeforeRet_;
	}
	goto LA1_;
	LA5_: ;
	{
		raiseRangeError(((NI64) (i)));
	}
	LA1_: ;
	}BeforeRet_: ;
	return result;
}

N_LIB_PRIVATE N_NIMCALL(tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g*, newSelectEvent_yPg79aKB2t4d8AebPbhDJmg)(void) {
	tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g* result;
	tyArray_SKEqGXcReU4NvbQlH779b5Q fds;
	void* T7_;
	nimfr_("newSelectEvent", "ioselectors_kqueue.nim");
	result = (tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g*)0;
	memset((void*)fds, 0, sizeof(fds));
	nimln_(139, "ioselectors_kqueue.nim");
	{
		int T3_;
		NI32 T6_;
		nimln_(398, "system.nim");
		nimln_(139, "ioselectors_kqueue.nim");
		T3_ = (int)0;
		T3_ = pipe(fds);
		if (!!((T3_ == ((NI32) 0)))) goto LA4_;
		nimln_(140, "ioselectors_kqueue.nim");
		T6_ = (NI32)0;
		T6_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
		raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T6_);
	}
	LA4_: ;
	nimln_(141, "ioselectors_kqueue.nim");
	setNonBlocking_MR9caCk0HOe6tVDYIV6sjgAselectors(fds[(((NI) 0))- 0]);
	nimln_(142, "ioselectors_kqueue.nim");
	setNonBlocking_MR9caCk0HOe6tVDYIV6sjgAselectors(fds[(((NI) 1))- 0]);
	nimln_(143, "ioselectors_kqueue.nim");
	T7_ = (void*)0;
	T7_ = allocShared0_sVm4rDImKK2ZDdylByayiA_4(((NI)chckRange(((NI)sizeof(tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g)), ((NI) 0), ((NI) IL64(9223372036854775807)))));
	result = ((tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g*) (T7_));
	nimln_(144, "ioselectors_kqueue.nim");
	(*result).rfd = fds[(((NI) 0))- 0];
	nimln_(145, "ioselectors_kqueue.nim");
	(*result).wfd = fds[(((NI) 1))- 0];
	popFrame();
	return result;
}

N_LIB_PRIVATE N_NIMCALL(void, trigger_trDKG82w8lu69cS7ELKcDiA)(tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g* ev) {
	NU64 data;
	nimfr_("trigger", "ioselectors_kqueue.nim");
	nimln_(148, "ioselectors_kqueue.nim");
	data = 1ULL;
	nimln_(149, "ioselectors_kqueue.nim");
	{
		NI T3_;
		NI32 T6_;
		nimln_(398, "system.nim");
		nimln_(149, "ioselectors_kqueue.nim");
		T3_ = (NI)0;
		T3_ = write((*ev).wfd, ((void*) ((&data))), ((NI) 8));
		if (!!((T3_ == ((NI) 8)))) goto LA4_;
		nimln_(150, "ioselectors_kqueue.nim");
		T6_ = (NI32)0;
		T6_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
		raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T6_);
	}
	LA4_: ;
	popFrame();
}

N_LIB_PRIVATE N_NIMCALL(void, close_trDKG82w8lu69cS7ELKcDiA_2)(tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g* ev) {
	int res1;
	int res2;
	nimfr_("close", "ioselectors_kqueue.nim");
	nimln_(153, "ioselectors_kqueue.nim");
	res1 = close((*ev).rfd);
	nimln_(154, "ioselectors_kqueue.nim");
	res2 = close((*ev).wfd);
	nimln_(155, "ioselectors_kqueue.nim");
	deallocShared_RCjNtRnHdRYntrcE7YtwWw_2(((void*) (ev)));
	nimln_(156, "ioselectors_kqueue.nim");
	{
		NIM_BOOL T3_;
		NI32 T7_;
		T3_ = (NIM_BOOL)0;
		nimln_(398, "system.nim");
		nimln_(156, "ioselectors_kqueue.nim");
		T3_ = !((res1 == ((NI32) 0)));
		if (T3_) goto LA4_;
		nimln_(398, "system.nim");
		nimln_(156, "ioselectors_kqueue.nim");
		T3_ = !((res2 == ((NI32) 0)));
		LA4_: ;
		if (!T3_) goto LA5_;
		nimln_(157, "ioselectors_kqueue.nim");
		T7_ = (NI32)0;
		T7_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
		raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T7_);
	}
	LA5_: ;
	popFrame();
}

N_LIB_PRIVATE N_NIMCALL(void, setEvent_trDKG82w8lu69cS7ELKcDiA_3)(tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g* ev) {
	nimfr_("setEvent", "selectors.nim");
	nimln_(327, "selectors.nim");
	trigger_trDKG82w8lu69cS7ELKcDiA(ev);
	popFrame();
}
static N_NIMCALL(void, Marker_tySequence_aFT14fmnUl0dbEzr23F30g)(void* p, NI op) {
	tySequence_aFT14fmnUl0dbEzr23F30g* a;
	NI T1_;
	a = (tySequence_aFT14fmnUl0dbEzr23F30g*)p;
	T1_ = (NI)0;
}
static N_NIMCALL(void, Marker_tySequence_lKsVWjYqlRD7eN7MeIt2PQ)(void* p, NI op) {
	tySequence_lKsVWjYqlRD7eN7MeIt2PQ* a;
	NI T1_;
	a = (tySequence_lKsVWjYqlRD7eN7MeIt2PQ*)p;
	T1_ = (NI)0;
	for (T1_ = 0; T1_ < a->Sup.len; T1_++) {
	nimGCvisit((void*)a->data[T1_].data.readList, op);
	nimGCvisit((void*)a->data[T1_].data.writeList, op);
	}
}
static N_NIMCALL(void, Marker_tyRef_eV1HoGAGYVaJgQ5BCEf67g)(void* p, NI op) {
	tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* a;
	a = (tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA*)p;
	nimGCvisit((void*)(*a).changes, op);
	nimGCvisit((void*)(*a).fds, op);
}

static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src) {
	nimfr_("asgnRefNoCycle", "gc.nim");
	nimln_(271, "gc.nim");
	{
		tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* c;
		nimln_(398, "system.nim");
		nimln_(271, "gc.nim");
		if (!!((src == NIM_NIL))) goto LA3_;
		nimln_(272, "gc.nim");
		c = usrToCell_yB9aH5WIlwd0xkYrcdPeXrQsystem(src);
		nimln_(273, "gc.nim");
		(*c).refcount += ((NI) 8);
	}
	LA3_: ;
	nimln_(274, "gc.nim");
	{
		tyObject_Cell_1zcF9cV8XIAtbN8h5HRUB8g* c_2;
		nimln_(398, "system.nim");
		nimln_(274, "gc.nim");
		if (!!(((*dest) == NIM_NIL))) goto LA7_;
		nimln_(275, "gc.nim");
		c_2 = usrToCell_yB9aH5WIlwd0xkYrcdPeXrQsystem((*dest));
		nimln_(276, "gc.nim");
		{
			(*c_2).refcount -= ((NI) 8);
			if (!((NU64)((*c_2).refcount) < (NU64)(((NI) 8)))) goto LA11_;
			nimln_(277, "gc.nim");
			rtlAddZCT_MV4BBk6J1qu70IbBxwEn4w_2system(c_2);
		}
		LA11_: ;
	}
	LA7_: ;
	nimln_(278, "gc.nim");
	(*dest) = src;
	popFrame();
}

N_LIB_PRIVATE N_NIMCALL(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA*, newSelector_GQHk9ayxNeMCVhLquLKqsaw)(void) {
	tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* result;
	int maxFD;
	size_t size;
	tyArray_SKEqGXcReU4NvbQlH779b5Q namearr;
	int kqFD;
	int usock;
	tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* T17_;
	nimfr_("newSelector", "ioselectors_kqueue.nim");
	result = (tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA*)0;
	nimln_(84, "ioselectors_kqueue.nim");
	maxFD = ((int) 0);
	nimln_(85, "ioselectors_kqueue.nim");
	size = ((size_t) 4);
	memset((void*)namearr, 0, sizeof(namearr));
	nimln_(86, "ioselectors_kqueue.nim");
	memcpy((void*)namearr, (NIM_CONST void*)TM_ln5vuDpFyDrAqQbYD2g52Q_10, sizeof(tyArray_SKEqGXcReU4NvbQlH779b5Q));
	nimln_(88, "ioselectors_kqueue.nim");
	{
		int T3_;
		NI32 T6_;
		nimln_(398, "system.nim");
		nimln_(88, "ioselectors_kqueue.nim");
		T3_ = (int)0;
		T3_ = sysctl((&namearr[(((NI) 0))- 0]), ((unsigned int) 2), ((void*) ((&maxFD))), (&size), NIM_NIL, ((NI) 0));
		if (!!((T3_ == ((NI32) 0)))) goto LA4_;
		nimln_(90, "ioselectors_kqueue.nim");
		T6_ = (NI32)0;
		T6_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
		raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T6_);
	}
	LA4_: ;
	nimln_(92, "ioselectors_kqueue.nim");
	kqFD = kqueue();
	nimln_(93, "ioselectors_kqueue.nim");
	{
		NI32 T11_;
		if (!(kqFD < ((NI32) 0))) goto LA9_;
		nimln_(94, "ioselectors_kqueue.nim");
		T11_ = (NI32)0;
		T11_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
		raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T11_);
	}
	LA9_: ;
	nimln_(99, "ioselectors_kqueue.nim");
	usock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
	nimln_(101, "ioselectors_kqueue.nim");
	{
		NI32 err;
		int T16_;
		if (!(usock == ((NI32) -1))) goto LA14_;
		nimln_(102, "ioselectors_kqueue.nim");
		err = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
		nimln_(103, "ioselectors_kqueue.nim");
		T16_ = (int)0;
		T16_ = close(kqFD);
		T16_;
		nimln_(104, "ioselectors_kqueue.nim");
		raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(err);
	}
	LA14_: ;
	nimln_(113, "ioselectors_kqueue.nim");
	T17_ = (tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA*)0;
	T17_ = (tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA*) newObj((&NTI_eV1HoGAGYVaJgQ5BCEf67g_), sizeof(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA));
	result = T17_;
	nimln_(114, "ioselectors_kqueue.nim");
	asgnRef((void**) (&(*result).fds), newSeq_ReBdb9aYcfG8RblsLwUT5zw(((NI)chckRange(maxFD, ((NI) 0), ((NI) IL64(9223372036854775807))))));
	nimln_(115, "ioselectors_kqueue.nim");
	asgnRefNoCycle((void**) (&(*result).changes), (tySequence_aFT14fmnUl0dbEzr23F30g*)nimNewSeqOfCap((&NTI_aFT14fmnUl0dbEzr23F30g_), ((NI) 64)));
	nimln_(117, "ioselectors_kqueue.nim");
	(*result).sock = usock;
	nimln_(118, "ioselectors_kqueue.nim");
	(*result).kqFD = kqFD;
	nimln_(119, "ioselectors_kqueue.nim");
	(*result).maxFD = ((NI) (maxFD));
	popFrame();
	return result;
}

N_LIB_PRIVATE N_NIMCALL(void, raiseIOSelectorsError_o9b1ajHBhCZ9cfHDVe9aM1OwA)(NimStringDesc* message) {
	NimStringDesc* msg;
	tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg* err;
	tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg* e;
	NimStringDesc* T1_;
	nimfr_("raiseIOSelectorsError", "selectors.nim");
	nimln_(265, "selectors.nim");
	msg = copyString(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_2));
	nimln_(267, "selectors.nim");
	msg = resizeString(msg, message->Sup.len + 0);
appendString(msg, message);
	nimln_(272, "selectors.nim");
	e = (tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg*)0;
	nimln_(2811, "system.nim");
	e = (tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg*) newObj((&NTI_yREHAUxoe4I2puy9cJ9cMatg_), sizeof(tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg));
	(*e).Sup.Sup.m_type = (&NTI_0onfiGw9bxynoOBJJC01SAg_);
	nimln_(272, "selectors.nim");
	T1_ = (NimStringDesc*)0;
	T1_ = (*e).Sup.message; (*e).Sup.message = copyStringRC1(msg);
	if (T1_) nimGCunrefNoCycle(T1_);
	nimln_(2806, "system.nim");
	asgnRef((void**) (&(*e).Sup.parent), NIM_NIL);
	err = e;
	nimln_(273, "selectors.nim");
	raiseException((Exception*)err, "IOSelectorsException");
	popFrame();
}

static N_INLINE(NI, addInt)(NI a, NI b) {
	NI result;
{	result = (NI)0;
	result = (NI)((NU64)(a) + (NU64)(b));
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (((NI) 0) <= (NI)(result ^ a));
		if (T3_) goto LA4_;
		T3_ = (((NI) 0) <= (NI)(result ^ b));
		LA4_: ;
		if (!T3_) goto LA5_;
		goto BeforeRet_;
	}
	LA5_: ;
	raiseOverflow();
	}BeforeRet_: ;
	return result;
}

static N_INLINE(NI, resize_bzF9a0JivP3Z4njqaxuLc5wsystem)(NI old) {
	NI result;
	result = (NI)0;
	{
		if (!(old <= ((NI) 0))) goto LA3_;
		result = ((NI) 4);
	}
	goto LA1_;
	LA3_: ;
	{
		if (!(old < ((NI) 65536))) goto LA6_;
		result = (NI)(old * ((NI) 2));
	}
	goto LA1_;
	LA6_: ;
	{
		result = (NI)((NI)(old * ((NI) 3)) / ((NI) 2));
	}
	LA1_: ;
	return result;
}

static N_INLINE(void, zeroMem_t0o5XqKanO5QJfXMGEzp2Asystem)(void* p, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(p, ((int) 0), ((size_t) (size)));
}

static N_INLINE(TGenericSeq*, setLengthSeq)(TGenericSeq* seq, NI elemSize, NI newLen) {
	TGenericSeq* result;
	result = (TGenericSeq*)0;
	result = seq;
	{
		NI r;
		NI T5_;
		void* T6_;
		if (!((NI)((*result).reserved & ((NI) IL64(4611686018427387903))) < newLen)) goto LA3_;
		T5_ = (NI)0;
		T5_ = resize_bzF9a0JivP3Z4njqaxuLc5wsystem((NI)((*result).reserved & ((NI) IL64(4611686018427387903))));
		r = ((T5_ >= newLen) ? T5_ : newLen);
		T6_ = (void*)0;
		T6_ = growObj_AVYny8c0GTk28gxjmat1MA(((void*) (result)), (NI)((NI)(elemSize * r) + ((NI) 16)));
		result = ((TGenericSeq*) (T6_));
		(*result).reserved = r;
	}
	goto LA1_;
	LA3_: ;
	{
		if (!(newLen < (*result).len)) goto LA8_;
		{
			TNimType* T12_;
			T12_ = (TNimType*)0;
			T12_ = extGetCellType(((void*) (result)));
			if (!!((((*(*T12_).base).flags &(1U<<((NU)(((tyEnum_TNimTypeFlag_v8QUszD1sWlSIWZz7mC4bQ) 0))&7U)))!=0))) goto LA13_;
			{
				NI i;
				NI colontmp_;
				NI res;
				i = (NI)0;
				colontmp_ = (NI)0;
				colontmp_ = (NI)((*result).len - ((NI) 1));
				res = newLen;
				{
					while (1) {
						TNimType* T18_;
						if (!(res <= colontmp_)) goto LA17;
						i = res;
						T18_ = (TNimType*)0;
						T18_ = extGetCellType(((void*) (result)));
						forAllChildrenAux_YOI1Uo54H9aas13WthjhsfA(((void*) ((NI)((NU64)((NI)((NU64)(((NI) (ptrdiff_t) (result))) + (NU64)(((NI) 16)))) + (NU64)((NI)((NU64)(i) * (NU64)(elemSize)))))), (*T18_).base, ((tyEnum_WalkOp_Wfy7gT5VQ8B3aJBxqU8D9cQ) 2));
						res += ((NI) 1);
					} LA17: ;
				}
			}
		}
		LA13_: ;
		zeroMem_t0o5XqKanO5QJfXMGEzp2Asystem(((void*) ((NI)((NU64)((NI)((NU64)(((NI) (ptrdiff_t) (result))) + (NU64)(((NI) 16)))) + (NU64)((NI)((NU64)(newLen) * (NU64)(elemSize)))))), ((NI) ((NI)((NU64)((NI)((NU64)((*result).len) - (NU64)(newLen))) * (NU64)(elemSize)))));
	}
	goto LA1_;
	LA8_: ;
	LA1_: ;
	(*result).len = newLen;
	return result;
}

N_LIB_PRIVATE N_NIMCALL(void, registerHandle_GgwOhhggxqPkAQmnnBmXJA)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, int fd, tySet_tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg events, tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA data) {
	NI fdi;
	tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ* skey;
	nimfr_("registerHandle", "ioselectors_kqueue.nim");
	nimln_(222, "ioselectors_kqueue.nim");
	fdi = ((NI) (fd));
	nimln_(223, "ioselectors_kqueue.nim");
	{
		nimln_(160, "ioselectors_kqueue.nim");
		if (!((*s).maxFD <= fdi)) goto LA3_;
		nimln_(161, "ioselectors_kqueue.nim");
		raiseIOSelectorsError_o9b1ajHBhCZ9cfHDVe9aM1OwA(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_11));
	}
	LA3_: ;
	nimln_(224, "ioselectors_kqueue.nim");
	{
		if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
		if (!!(((*s).fds->data[fdi].ident == ((NI) 0)))) goto LA7_;
		raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_12));
	}
	LA7_: ;
	nimln_(282, "selectors.nim");
	if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
	skey = (&(*s).fds->data[fdi]);
	nimln_(225, "ioselectors_kqueue.nim");
	(*skey).ident = fdi;
	(*skey).events = events;
	(*skey).param = ((NI) 0);
	nimln_(286, "selectors.nim");
	genericSeqAssign((&(*skey).data.readList), data.readList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	genericSeqAssign((&(*skey).data.writeList), data.writeList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	nimln_(227, "ioselectors_kqueue.nim");
	{
		int length;
		NI T25_;
		nimln_(398, "system.nim");
		nimln_(227, "ioselectors_kqueue.nim");
		if (!!((events == 0))) goto LA11_;
		nimln_(228, "ioselectors_kqueue.nim");
		{
			struct kevent T17_;
			NI T18_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_13;
			if (!((events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0)) goto LA15_;
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T17_), 0, sizeof(T17_));
			T17_.ident = ((NU) (fdi));
			T17_.filter = ((short) -1);
			T17_.flags = ((unsigned short) 1);
			T17_.fflags = ((unsigned int) 0);
			T17_.data = ((NI) 0);
			T17_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T18_ = (*s).changes->Sup.len++;
			(*s).changes->data[T18_] = T17_;
			nimln_(230, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_13 = addInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_13);
		}
		LA15_: ;
		nimln_(231, "ioselectors_kqueue.nim");
		{
			struct kevent T23_;
			NI T24_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_14;
			if (!((events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0)) goto LA21_;
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T23_), 0, sizeof(T23_));
			T23_.ident = ((NU) (fdi));
			T23_.filter = ((short) -2);
			T23_.flags = ((unsigned short) 1);
			T23_.fflags = ((unsigned int) 0);
			T23_.data = ((NI) 0);
			T23_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T24_ = (*s).changes->Sup.len++;
			(*s).changes->data[T24_] = T23_;
			nimln_(233, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_14 = addInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_14);
		}
		LA21_: ;
		nimln_(213, "ioselectors_kqueue.nim");
		T25_ = ((*s).changes ? (*s).changes->Sup.len : 0);
		length = ((int)chckRange(T25_, ((int) (-2147483647 -1)), ((int) 2147483647)));
		nimln_(236, "ioselectors_kqueue.nim");
		{
			nimln_(214, "ioselectors_kqueue.nim");
			if (!(((NI32) 0) < length)) goto LA28_;
			nimln_(215, "ioselectors_kqueue.nim");
			{
				int T32_;
				NI32 T35_;
				if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
				T32_ = (int)0;
				T32_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length, NIM_NIL, ((int) 0), NIM_NIL);
				if (!(T32_ == ((NI32) -1))) goto LA33_;
				nimln_(217, "ioselectors_kqueue.nim");
				T35_ = (NI32)0;
				T35_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
				raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T35_);
			}
			LA33_: ;
			nimln_(218, "ioselectors_kqueue.nim");
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
		}
		LA28_: ;
	}
	LA11_: ;
	popFrame();
}

static N_INLINE(NI, subInt)(NI a, NI b) {
	NI result;
{	result = (NI)0;
	result = (NI)((NU64)(a) - (NU64)(b));
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = (((NI) 0) <= (NI)(result ^ a));
		if (T3_) goto LA4_;
		T3_ = (((NI) 0) <= (NI)(result ^ (NI)((NU64) ~(b))));
		LA4_: ;
		if (!T3_) goto LA5_;
		goto BeforeRet_;
	}
	LA5_: ;
	raiseOverflow();
	}BeforeRet_: ;
	return result;
}

N_LIB_PRIVATE N_NIMCALL(void, unregister_lnP9aLHiiCaMlycdTh4sSSg)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, int fd) {
	NI fdi;
	tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ* pkey;
	tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA empty;
	nimfr_("unregister", "ioselectors_kqueue.nim");
	nimln_(374, "ioselectors_kqueue.nim");
	fdi = ((NI) (fd));
	nimln_(375, "ioselectors_kqueue.nim");
	{
		nimln_(160, "ioselectors_kqueue.nim");
		if (!((*s).maxFD <= fdi)) goto LA3_;
		nimln_(161, "ioselectors_kqueue.nim");
		raiseIOSelectorsError_o9b1ajHBhCZ9cfHDVe9aM1OwA(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_11));
	}
	LA3_: ;
	nimln_(376, "ioselectors_kqueue.nim");
	if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
	pkey = (&(*s).fds->data[fdi]);
	nimln_(377, "ioselectors_kqueue.nim");
	{
		NimStringDesc* T9_;
		NimStringDesc* T10_;
		if (!!(!(((*pkey).ident == ((NI) 0))))) goto LA7_;
		T9_ = (NimStringDesc*)0;
		T10_ = (NimStringDesc*)0;
		T10_ = nimIntToStr(fdi);
		T9_ = rawNewString(T10_->Sup.len + 68);
appendString(T9_, ((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_15));
appendString(T9_, T10_);
appendString(T9_, ((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_16));
		raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(T9_);
	}
	LA7_: ;
	nimln_(380, "ioselectors_kqueue.nim");
	{
		nimln_(398, "system.nim");
		nimln_(380, "ioselectors_kqueue.nim");
		if (!!(((*pkey).events == 0))) goto LA13_;
		nimln_(381, "ioselectors_kqueue.nim");
		{
			int length;
			NI T31_;
			nimln_(398, "system.nim");
			nimln_(381, "ioselectors_kqueue.nim");
			if (!!((((*pkey).events & 3) == 0))) goto LA17_;
			nimln_(382, "ioselectors_kqueue.nim");
			{
				struct kevent T23_;
				NI T24_;
				NI TM_ln5vuDpFyDrAqQbYD2g52Q_17;
				if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0)) goto LA21_;
				nimln_(206, "ioselectors_kqueue.nim");
				memset((void*)(&T23_), 0, sizeof(T23_));
				T23_.ident = ((NU) (fdi));
				T23_.filter = ((short) -1);
				T23_.flags = ((unsigned short) 2);
				T23_.fflags = ((unsigned int) 0);
				T23_.data = ((NI) 0);
				T23_.udata = NIM_NIL;
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
				T24_ = (*s).changes->Sup.len++;
				(*s).changes->data[T24_] = T23_;
				nimln_(384, "ioselectors_kqueue.nim");
				TM_ln5vuDpFyDrAqQbYD2g52Q_17 = subInt((*s).count, ((NI) 1));
				(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_17);
			}
			LA21_: ;
			nimln_(385, "ioselectors_kqueue.nim");
			{
				struct kevent T29_;
				NI T30_;
				NI TM_ln5vuDpFyDrAqQbYD2g52Q_18;
				if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0)) goto LA27_;
				nimln_(206, "ioselectors_kqueue.nim");
				memset((void*)(&T29_), 0, sizeof(T29_));
				T29_.ident = ((NU) (fdi));
				T29_.filter = ((short) -2);
				T29_.flags = ((unsigned short) 2);
				T29_.fflags = ((unsigned int) 0);
				T29_.data = ((NI) 0);
				T29_.udata = NIM_NIL;
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
				T30_ = (*s).changes->Sup.len++;
				(*s).changes->data[T30_] = T29_;
				nimln_(387, "ioselectors_kqueue.nim");
				TM_ln5vuDpFyDrAqQbYD2g52Q_18 = subInt((*s).count, ((NI) 1));
				(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_18);
			}
			LA27_: ;
			nimln_(213, "ioselectors_kqueue.nim");
			T31_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			length = ((int)chckRange(T31_, ((int) (-2147483647 -1)), ((int) 2147483647)));
			nimln_(389, "ioselectors_kqueue.nim");
			{
				nimln_(214, "ioselectors_kqueue.nim");
				if (!(((NI32) 0) < length)) goto LA34_;
				nimln_(215, "ioselectors_kqueue.nim");
				{
					int T38_;
					NI32 T41_;
					if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
					T38_ = (int)0;
					T38_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T38_ == ((NI32) -1))) goto LA39_;
					nimln_(217, "ioselectors_kqueue.nim");
					T41_ = (NI32)0;
					T41_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
					raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T41_);
				}
				LA39_: ;
				nimln_(218, "ioselectors_kqueue.nim");
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
			}
			LA34_: ;
		}
		goto LA15_;
		LA17_: ;
		{
			nimln_(390, "ioselectors_kqueue.nim");
			if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 2))&31U)))!=0)) goto LA43_;
			nimln_(391, "ioselectors_kqueue.nim");
			{
				struct kevent T49_;
				NI T50_;
				int length_2;
				NI T51_;
				NI TM_ln5vuDpFyDrAqQbYD2g52Q_19;
				nimln_(1212, "system.nim");
				nimln_(391, "ioselectors_kqueue.nim");
				if (!!((((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 9))&31U)))!=0))) goto LA47_;
				nimln_(206, "ioselectors_kqueue.nim");
				memset((void*)(&T49_), 0, sizeof(T49_));
				T49_.ident = ((NU) (fdi));
				T49_.filter = ((short) -7);
				T49_.flags = ((unsigned short) 2);
				T49_.fflags = ((unsigned int) 0);
				T49_.data = ((NI) 0);
				T49_.udata = NIM_NIL;
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
				T50_ = (*s).changes->Sup.len++;
				(*s).changes->data[T50_] = T49_;
				nimln_(213, "ioselectors_kqueue.nim");
				T51_ = ((*s).changes ? (*s).changes->Sup.len : 0);
				length_2 = ((int)chckRange(T51_, ((int) (-2147483647 -1)), ((int) 2147483647)));
				nimln_(394, "ioselectors_kqueue.nim");
				{
					nimln_(214, "ioselectors_kqueue.nim");
					if (!(((NI32) 0) < length_2)) goto LA54_;
					nimln_(215, "ioselectors_kqueue.nim");
					{
						int T58_;
						NI32 T61_;
						if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
						T58_ = (int)0;
						T58_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length_2, NIM_NIL, ((int) 0), NIM_NIL);
						if (!(T58_ == ((NI32) -1))) goto LA59_;
						nimln_(217, "ioselectors_kqueue.nim");
						T61_ = (NI32)0;
						T61_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
						raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T61_);
					}
					LA59_: ;
					nimln_(218, "ioselectors_kqueue.nim");
					(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
				}
				LA54_: ;
				nimln_(395, "ioselectors_kqueue.nim");
				TM_ln5vuDpFyDrAqQbYD2g52Q_19 = subInt((*s).count, ((NI) 1));
				(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_19);
			}
			LA47_: ;
			nimln_(396, "ioselectors_kqueue.nim");
			{
				int T64_;
				NI32 T67_;
				nimln_(398, "system.nim");
				nimln_(396, "ioselectors_kqueue.nim");
				T64_ = (int)0;
				T64_ = close(((int)chckRange((*pkey).ident, ((int) (-2147483647 -1)), ((int) 2147483647))));
				if (!!((T64_ == ((NI32) 0)))) goto LA65_;
				nimln_(397, "ioselectors_kqueue.nim");
				T67_ = (NI32)0;
				T67_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
				raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T67_);
			}
			LA65_: ;
		}
		goto LA15_;
		LA43_: ;
		{
			sigset_t nmask;
			sigset_t omask;
			int signal_1;
			int T71_;
			int T72_;
			int T73_;
			struct kevent T80_;
			NI T81_;
			int length_3;
			NI T82_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_20;
			nimln_(398, "ioselectors_kqueue.nim");
			if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 3))&31U)))!=0)) goto LA69_;
			memset((void*)(&nmask), 0, sizeof(nmask));
			memset((void*)(&omask), 0, sizeof(omask));
			nimln_(400, "ioselectors_kqueue.nim");
			signal_1 = ((int)chckRange((*pkey).param, ((int) (-2147483647 -1)), ((int) 2147483647)));
			nimln_(401, "ioselectors_kqueue.nim");
			T71_ = (int)0;
			T71_ = sigemptyset((&nmask));
			T71_;
			nimln_(402, "ioselectors_kqueue.nim");
			T72_ = (int)0;
			T72_ = sigemptyset((&omask));
			T72_;
			nimln_(403, "ioselectors_kqueue.nim");
			T73_ = (int)0;
			T73_ = sigaddset((&nmask), signal_1);
			T73_;
			nimln_(302, "selectors.nim");
			{
				int T76_;
				NI32 T79_;
				T76_ = (int)0;
				T76_ = sigprocmask(SIG_UNBLOCK, (&nmask), (&omask));
				if (!(T76_ == ((NI32) -1))) goto LA77_;
				nimln_(303, "selectors.nim");
				T79_ = (NI32)0;
				T79_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
				raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T79_);
			}
			LA77_: ;
			nimln_(405, "ioselectors_kqueue.nim");
			signal(signal_1, ((tyProc_lfH2drpqP9aSEAAjWgrYv8Q) 0));
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T80_), 0, sizeof(T80_));
			T80_.ident = ((NU) ((*pkey).param));
			T80_.filter = ((short) -6);
			T80_.flags = ((unsigned short) 2);
			T80_.fflags = ((unsigned int) 0);
			T80_.data = ((NI) 0);
			T80_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T81_ = (*s).changes->Sup.len++;
			(*s).changes->data[T81_] = T80_;
			nimln_(213, "ioselectors_kqueue.nim");
			T82_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			length_3 = ((int)chckRange(T82_, ((int) (-2147483647 -1)), ((int) 2147483647)));
			nimln_(408, "ioselectors_kqueue.nim");
			{
				nimln_(214, "ioselectors_kqueue.nim");
				if (!(((NI32) 0) < length_3)) goto LA85_;
				nimln_(215, "ioselectors_kqueue.nim");
				{
					int T89_;
					NI32 T92_;
					if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
					T89_ = (int)0;
					T89_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length_3, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T89_ == ((NI32) -1))) goto LA90_;
					nimln_(217, "ioselectors_kqueue.nim");
					T92_ = (NI32)0;
					T92_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
					raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T92_);
				}
				LA90_: ;
				nimln_(218, "ioselectors_kqueue.nim");
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
			}
			LA85_: ;
			nimln_(409, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_20 = subInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_20);
			nimln_(410, "ioselectors_kqueue.nim");
			{
				int T95_;
				NI32 T98_;
				nimln_(398, "system.nim");
				nimln_(410, "ioselectors_kqueue.nim");
				T95_ = (int)0;
				T95_ = close(((int)chckRange((*pkey).ident, ((int) (-2147483647 -1)), ((int) 2147483647))));
				if (!!((T95_ == ((NI32) 0)))) goto LA96_;
				nimln_(411, "ioselectors_kqueue.nim");
				T98_ = (NI32)0;
				T98_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
				raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T98_);
			}
			LA96_: ;
		}
		goto LA15_;
		LA69_: ;
		{
			nimln_(412, "ioselectors_kqueue.nim");
			if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 4))&31U)))!=0)) goto LA100_;
			nimln_(413, "ioselectors_kqueue.nim");
			{
				struct kevent T106_;
				NI T107_;
				int length_4;
				NI T108_;
				NI TM_ln5vuDpFyDrAqQbYD2g52Q_21;
				nimln_(1212, "system.nim");
				nimln_(413, "ioselectors_kqueue.nim");
				if (!!((((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 9))&31U)))!=0))) goto LA104_;
				nimln_(206, "ioselectors_kqueue.nim");
				memset((void*)(&T106_), 0, sizeof(T106_));
				T106_.ident = ((NU) ((*pkey).param));
				T106_.filter = ((short) -5);
				T106_.flags = ((unsigned short) 2);
				T106_.fflags = ((unsigned int) 0);
				T106_.data = ((NI) 0);
				T106_.udata = NIM_NIL;
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
				T107_ = (*s).changes->Sup.len++;
				(*s).changes->data[T107_] = T106_;
				nimln_(213, "ioselectors_kqueue.nim");
				T108_ = ((*s).changes ? (*s).changes->Sup.len : 0);
				length_4 = ((int)chckRange(T108_, ((int) (-2147483647 -1)), ((int) 2147483647)));
				nimln_(416, "ioselectors_kqueue.nim");
				{
					nimln_(214, "ioselectors_kqueue.nim");
					if (!(((NI32) 0) < length_4)) goto LA111_;
					nimln_(215, "ioselectors_kqueue.nim");
					{
						int T115_;
						NI32 T118_;
						if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
						T115_ = (int)0;
						T115_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length_4, NIM_NIL, ((int) 0), NIM_NIL);
						if (!(T115_ == ((NI32) -1))) goto LA116_;
						nimln_(217, "ioselectors_kqueue.nim");
						T118_ = (NI32)0;
						T118_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
						raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T118_);
					}
					LA116_: ;
					nimln_(218, "ioselectors_kqueue.nim");
					(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
				}
				LA111_: ;
				nimln_(417, "ioselectors_kqueue.nim");
				TM_ln5vuDpFyDrAqQbYD2g52Q_21 = subInt((*s).count, ((NI) 1));
				(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_21);
			}
			LA104_: ;
			nimln_(418, "ioselectors_kqueue.nim");
			{
				int T121_;
				NI32 T124_;
				nimln_(398, "system.nim");
				nimln_(418, "ioselectors_kqueue.nim");
				T121_ = (int)0;
				T121_ = close(((int)chckRange((*pkey).ident, ((int) (-2147483647 -1)), ((int) 2147483647))));
				if (!!((T121_ == ((NI32) 0)))) goto LA122_;
				nimln_(419, "ioselectors_kqueue.nim");
				T124_ = (NI32)0;
				T124_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
				raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T124_);
			}
			LA122_: ;
		}
		goto LA15_;
		LA100_: ;
		{
			struct kevent T128_;
			NI T129_;
			int length_5;
			NI T130_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_22;
			nimln_(420, "ioselectors_kqueue.nim");
			if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 5))&31U)))!=0)) goto LA126_;
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T128_), 0, sizeof(T128_));
			T128_.ident = ((NU) (fdi));
			T128_.filter = ((short) -4);
			T128_.flags = ((unsigned short) 2);
			T128_.fflags = ((unsigned int) 0);
			T128_.data = ((NI) 0);
			T128_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T129_ = (*s).changes->Sup.len++;
			(*s).changes->data[T129_] = T128_;
			nimln_(213, "ioselectors_kqueue.nim");
			T130_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			length_5 = ((int)chckRange(T130_, ((int) (-2147483647 -1)), ((int) 2147483647)));
			nimln_(423, "ioselectors_kqueue.nim");
			{
				nimln_(214, "ioselectors_kqueue.nim");
				if (!(((NI32) 0) < length_5)) goto LA133_;
				nimln_(215, "ioselectors_kqueue.nim");
				{
					int T137_;
					NI32 T140_;
					if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
					T137_ = (int)0;
					T137_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length_5, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T137_ == ((NI32) -1))) goto LA138_;
					nimln_(217, "ioselectors_kqueue.nim");
					T140_ = (NI32)0;
					T140_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
					raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T140_);
				}
				LA138_: ;
				nimln_(218, "ioselectors_kqueue.nim");
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
			}
			LA133_: ;
			nimln_(424, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_22 = subInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_22);
		}
		goto LA15_;
		LA126_: ;
		{
			struct kevent T144_;
			NI T145_;
			int length_6;
			NI T146_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_23;
			nimln_(425, "ioselectors_kqueue.nim");
			if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 6))&31U)))!=0)) goto LA142_;
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T144_), 0, sizeof(T144_));
			T144_.ident = ((NU) (fdi));
			T144_.filter = ((short) -1);
			T144_.flags = ((unsigned short) 2);
			T144_.fflags = ((unsigned int) 0);
			T144_.data = ((NI) 0);
			T144_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T145_ = (*s).changes->Sup.len++;
			(*s).changes->data[T145_] = T144_;
			nimln_(213, "ioselectors_kqueue.nim");
			T146_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			length_6 = ((int)chckRange(T146_, ((int) (-2147483647 -1)), ((int) 2147483647)));
			nimln_(428, "ioselectors_kqueue.nim");
			{
				nimln_(214, "ioselectors_kqueue.nim");
				if (!(((NI32) 0) < length_6)) goto LA149_;
				nimln_(215, "ioselectors_kqueue.nim");
				{
					int T153_;
					NI32 T156_;
					if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
					T153_ = (int)0;
					T153_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length_6, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T153_ == ((NI32) -1))) goto LA154_;
					nimln_(217, "ioselectors_kqueue.nim");
					T156_ = (NI32)0;
					T156_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
					raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T156_);
				}
				LA154_: ;
				nimln_(218, "ioselectors_kqueue.nim");
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
			}
			LA149_: ;
			nimln_(429, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_23 = subInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_23);
		}
		goto LA15_;
		LA142_: ;
		LA15_: ;
	}
	LA13_: ;
	memset((void*)(&empty), 0, sizeof(empty));
	nimln_(133, "ioselectors_kqueue.nim");
	(*pkey).ident = ((NI) 0);
	nimln_(134, "ioselectors_kqueue.nim");
	(*pkey).events = 0;
	nimln_(135, "ioselectors_kqueue.nim");
	genericSeqAssign((&(*pkey).data.readList), empty.readList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	genericSeqAssign((&(*pkey).data.writeList), empty.writeList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	popFrame();
}

N_LIB_PRIVATE N_NIMCALL(void, unregister_bZkwcyvL5q5eUQQ0lJzWAA)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g* ev) {
	NI fdi;
	tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ* pkey;
	struct kevent T13_;
	NI T14_;
	int length;
	NI T15_;
	tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA empty;
	NI TM_ln5vuDpFyDrAqQbYD2g52Q_26;
	nimfr_("unregister", "ioselectors_kqueue.nim");
	nimln_(434, "ioselectors_kqueue.nim");
	fdi = ((NI) ((*ev).rfd));
	nimln_(435, "ioselectors_kqueue.nim");
	{
		nimln_(160, "ioselectors_kqueue.nim");
		if (!((*s).maxFD <= fdi)) goto LA3_;
		nimln_(161, "ioselectors_kqueue.nim");
		raiseIOSelectorsError_o9b1ajHBhCZ9cfHDVe9aM1OwA(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_11));
	}
	LA3_: ;
	nimln_(436, "ioselectors_kqueue.nim");
	if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
	pkey = (&(*s).fds->data[fdi]);
	nimln_(437, "ioselectors_kqueue.nim");
	{
		if (!!(!(((*pkey).ident == ((NI) 0))))) goto LA7_;
		raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_24));
	}
	LA7_: ;
	nimln_(438, "ioselectors_kqueue.nim");
	{
		if (!!((((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 6))&31U)))!=0))) goto LA11_;
		raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_25));
	}
	LA11_: ;
	nimln_(206, "ioselectors_kqueue.nim");
	memset((void*)(&T13_), 0, sizeof(T13_));
	T13_.ident = ((NU) (fdi));
	T13_.filter = ((short) -1);
	T13_.flags = ((unsigned short) 2);
	T13_.fflags = ((unsigned int) 0);
	T13_.data = ((NI) 0);
	T13_.udata = NIM_NIL;
	(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
	T14_ = (*s).changes->Sup.len++;
	(*s).changes->data[T14_] = T13_;
	nimln_(213, "ioselectors_kqueue.nim");
	T15_ = ((*s).changes ? (*s).changes->Sup.len : 0);
	length = ((int)chckRange(T15_, ((int) (-2147483647 -1)), ((int) 2147483647)));
	nimln_(441, "ioselectors_kqueue.nim");
	{
		nimln_(214, "ioselectors_kqueue.nim");
		if (!(((NI32) 0) < length)) goto LA18_;
		nimln_(215, "ioselectors_kqueue.nim");
		{
			int T22_;
			NI32 T25_;
			if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
			T22_ = (int)0;
			T22_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length, NIM_NIL, ((int) 0), NIM_NIL);
			if (!(T22_ == ((NI32) -1))) goto LA23_;
			nimln_(217, "ioselectors_kqueue.nim");
			T25_ = (NI32)0;
			T25_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
			raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T25_);
		}
		LA23_: ;
		nimln_(218, "ioselectors_kqueue.nim");
		(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
	}
	LA18_: ;
	memset((void*)(&empty), 0, sizeof(empty));
	nimln_(133, "ioselectors_kqueue.nim");
	(*pkey).ident = ((NI) 0);
	nimln_(134, "ioselectors_kqueue.nim");
	(*pkey).events = 0;
	nimln_(135, "ioselectors_kqueue.nim");
	genericSeqAssign((&(*pkey).data.readList), empty.readList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	genericSeqAssign((&(*pkey).data.writeList), empty.writeList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	nimln_(443, "ioselectors_kqueue.nim");
	TM_ln5vuDpFyDrAqQbYD2g52Q_26 = subInt((*s).count, ((NI) 1));
	(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_26);
	popFrame();
}

static N_INLINE(NIM_BOOL, contains_Fq69aUQLu9cabGUhLgQogmXgasyncdispatch)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, NI fd) {
	NIM_BOOL result;
	nimfr_("contains", "ioselectors_kqueue.nim");
{	result = (NIM_BOOL)0;
	nimln_(596, "ioselectors_kqueue.nim");
	nimln_(398, "system.nim");
	nimln_(596, "ioselectors_kqueue.nim");
	if ((NU)(fd) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
	result = !(((*s).fds->data[fd].ident == ((NI) 0)));
	goto BeforeRet_;
	}BeforeRet_: ;
	popFrame();
	return result;
}

N_LIB_PRIVATE N_NIMCALL(tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA*, getData_RBB0346cVWa12py3delH9aw)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, NI fd) {
	tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA* result;
	NI fdi;
	nimfr_("getData", "ioselectors_kqueue.nim");
	result = (tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA*)0;
	nimln_(599, "ioselectors_kqueue.nim");
	fdi = fd;
	nimln_(600, "ioselectors_kqueue.nim");
	{
		nimln_(160, "ioselectors_kqueue.nim");
		if (!((*s).maxFD <= fdi)) goto LA3_;
		nimln_(161, "ioselectors_kqueue.nim");
		raiseIOSelectorsError_o9b1ajHBhCZ9cfHDVe9aM1OwA(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_11));
	}
	LA3_: ;
	nimln_(601, "ioselectors_kqueue.nim");
	{
		NIM_BOOL T7_;
		T7_ = (NIM_BOOL)0;
		T7_ = contains_Fq69aUQLu9cabGUhLgQogmXgasyncdispatch(s, fdi);
		if (!T7_) goto LA8_;
		nimln_(602, "ioselectors_kqueue.nim");
		if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
		result = (&(*s).fds->data[fdi].data);
	}
	LA8_: ;
	popFrame();
	return result;
}

N_LIB_PRIVATE N_NIMCALL(void, updateHandle_oJVvb1kZTt9aacXskkHxkLQ)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, int fd, tySet_tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg events) {
	tySet_tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg maskEvents;
	NI fdi;
	tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ* pkey;
	nimfr_("updateHandle", "ioselectors_kqueue.nim");
	nimln_(240, "ioselectors_kqueue.nim");
	maskEvents = 508;
	nimln_(242, "ioselectors_kqueue.nim");
	fdi = ((NI) (fd));
	nimln_(243, "ioselectors_kqueue.nim");
	{
		nimln_(160, "ioselectors_kqueue.nim");
		if (!((*s).maxFD <= fdi)) goto LA3_;
		nimln_(161, "ioselectors_kqueue.nim");
		raiseIOSelectorsError_o9b1ajHBhCZ9cfHDVe9aM1OwA(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_11));
	}
	LA3_: ;
	nimln_(244, "ioselectors_kqueue.nim");
	if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
	pkey = (&(*s).fds->data[fdi]);
	nimln_(245, "ioselectors_kqueue.nim");
	{
		NimStringDesc* T9_;
		NimStringDesc* T10_;
		NimStringDesc* T11_;
		if (!!(!(((*pkey).ident == ((NI) 0))))) goto LA7_;
		T9_ = (NimStringDesc*)0;
		T10_ = (NimStringDesc*)0;
		T10_ = nimIntToStr(fdi);
		T11_ = (NimStringDesc*)0;
		T11_ = nsuFormatSingleElem(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_28), T10_);
		T9_ = rawNewString(T11_->Sup.len + 23);
appendString(T9_, ((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_27));
appendString(T9_, T11_);
		raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(T9_);
	}
	LA7_: ;
	nimln_(247, "ioselectors_kqueue.nim");
	{
		if (!!((((*pkey).events & maskEvents) == 0))) goto LA14_;
		raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_29));
	}
	LA14_: ;
	nimln_(249, "ioselectors_kqueue.nim");
	{
		int length;
		NI T52_;
		nimln_(398, "system.nim");
		nimln_(249, "ioselectors_kqueue.nim");
		if (!!(((*pkey).events == events))) goto LA18_;
		nimln_(250, "ioselectors_kqueue.nim");
		{
			NIM_BOOL T22_;
			struct kevent T26_;
			NI T27_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_30;
			T22_ = (NIM_BOOL)0;
			T22_ = (((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0);
			if (!(T22_)) goto LA23_;
			nimln_(1212, "system.nim");
			nimln_(250, "ioselectors_kqueue.nim");
			T22_ = !(((events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0));
			LA23_: ;
			if (!T22_) goto LA24_;
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T26_), 0, sizeof(T26_));
			T26_.ident = ((NU) (fdi));
			T26_.filter = ((short) -1);
			T26_.flags = ((unsigned short) 2);
			T26_.fflags = ((unsigned int) 0);
			T26_.data = ((NI) 0);
			T26_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T27_ = (*s).changes->Sup.len++;
			(*s).changes->data[T27_] = T26_;
			nimln_(252, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_30 = subInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_30);
		}
		LA24_: ;
		nimln_(253, "ioselectors_kqueue.nim");
		{
			NIM_BOOL T30_;
			struct kevent T34_;
			NI T35_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_31;
			T30_ = (NIM_BOOL)0;
			T30_ = (((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0);
			if (!(T30_)) goto LA31_;
			nimln_(1212, "system.nim");
			nimln_(253, "ioselectors_kqueue.nim");
			T30_ = !(((events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0));
			LA31_: ;
			if (!T30_) goto LA32_;
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T34_), 0, sizeof(T34_));
			T34_.ident = ((NU) (fdi));
			T34_.filter = ((short) -2);
			T34_.flags = ((unsigned short) 2);
			T34_.fflags = ((unsigned int) 0);
			T34_.data = ((NI) 0);
			T34_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T35_ = (*s).changes->Sup.len++;
			(*s).changes->data[T35_] = T34_;
			nimln_(255, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_31 = subInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_31);
		}
		LA32_: ;
		nimln_(256, "ioselectors_kqueue.nim");
		{
			NIM_BOOL T38_;
			struct kevent T42_;
			NI T43_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_32;
			T38_ = (NIM_BOOL)0;
			nimln_(1212, "system.nim");
			nimln_(256, "ioselectors_kqueue.nim");
			T38_ = !((((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0));
			if (!(T38_)) goto LA39_;
			T38_ = ((events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0);
			LA39_: ;
			if (!T38_) goto LA40_;
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T42_), 0, sizeof(T42_));
			T42_.ident = ((NU) (fdi));
			T42_.filter = ((short) -1);
			T42_.flags = ((unsigned short) 1);
			T42_.fflags = ((unsigned int) 0);
			T42_.data = ((NI) 0);
			T42_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T43_ = (*s).changes->Sup.len++;
			(*s).changes->data[T43_] = T42_;
			nimln_(258, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_32 = addInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_32);
		}
		LA40_: ;
		nimln_(259, "ioselectors_kqueue.nim");
		{
			NIM_BOOL T46_;
			struct kevent T50_;
			NI T51_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_33;
			T46_ = (NIM_BOOL)0;
			nimln_(1212, "system.nim");
			nimln_(259, "ioselectors_kqueue.nim");
			T46_ = !((((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0));
			if (!(T46_)) goto LA47_;
			T46_ = ((events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0);
			LA47_: ;
			if (!T46_) goto LA48_;
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T50_), 0, sizeof(T50_));
			T50_.ident = ((NU) (fdi));
			T50_.filter = ((short) -2);
			T50_.flags = ((unsigned short) 1);
			T50_.fflags = ((unsigned int) 0);
			T50_.data = ((NI) 0);
			T50_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T51_ = (*s).changes->Sup.len++;
			(*s).changes->data[T51_] = T50_;
			nimln_(261, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_33 = addInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_33);
		}
		LA48_: ;
		nimln_(213, "ioselectors_kqueue.nim");
		T52_ = ((*s).changes ? (*s).changes->Sup.len : 0);
		length = ((int)chckRange(T52_, ((int) (-2147483647 -1)), ((int) 2147483647)));
		nimln_(264, "ioselectors_kqueue.nim");
		{
			nimln_(214, "ioselectors_kqueue.nim");
			if (!(((NI32) 0) < length)) goto LA55_;
			nimln_(215, "ioselectors_kqueue.nim");
			{
				int T59_;
				NI32 T62_;
				if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
				T59_ = (int)0;
				T59_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length, NIM_NIL, ((int) 0), NIM_NIL);
				if (!(T59_ == ((NI32) -1))) goto LA60_;
				nimln_(217, "ioselectors_kqueue.nim");
				T62_ = (NI32)0;
				T62_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
				raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T62_);
			}
			LA60_: ;
			nimln_(218, "ioselectors_kqueue.nim");
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
		}
		LA55_: ;
		nimln_(266, "ioselectors_kqueue.nim");
		(*pkey).events = events;
	}
	LA18_: ;
	popFrame();
}

static N_INLINE(NI, divInt)(NI a, NI b) {
	NI result;
{	result = (NI)0;
	{
		if (!(b == ((NI) 0))) goto LA3_;
		raiseDivByZero();
	}
	LA3_: ;
	{
		NIM_BOOL T7_;
		T7_ = (NIM_BOOL)0;
		T7_ = (a == ((NI) (IL64(-9223372036854775807) - IL64(1))));
		if (!(T7_)) goto LA8_;
		T7_ = (b == ((NI) -1));
		LA8_: ;
		if (!T7_) goto LA9_;
		raiseOverflow();
	}
	LA9_: ;
	result = (NI)(a / b);
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NI, selectInto_u6ZS3exVT9btgsiCfyXHdYQ)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, NI timeout, tyObject_ReadyKey_vOvPQEijZeFv1xAgbh5rNw* results, NI resultsLen_0) {
	NI result;
	struct timespec tv;
	tyArray_80NdCG41SyhPocFo20IbDw resTable;
	struct timespec* ptv;
	NI maxres;
	NI count;
	int T15_;
	nimfr_("selectInto", "ioselectors_kqueue.nim");
	result = (NI)0;
	memset((void*)(&tv), 0, sizeof(tv));
	memset((void*)resTable, 0, sizeof(resTable));
	nimln_(450, "ioselectors_kqueue.nim");
	ptv = (&tv);
	nimln_(451, "ioselectors_kqueue.nim");
	maxres = ((NI) 64);
	nimln_(453, "ioselectors_kqueue.nim");
	{
		nimln_(398, "system.nim");
		nimln_(453, "ioselectors_kqueue.nim");
		if (!!((timeout == ((NI) -1)))) goto LA3_;
		nimln_(454, "ioselectors_kqueue.nim");
		{
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_34;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_35;
			if (!(((NI) 1000) <= timeout)) goto LA7_;
			nimln_(455, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_34 = divInt(timeout, ((NI) 1000));
			tv.tv_sec = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_34);
			nimln_(456, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_35 = mulInt((NI)((NU64)(timeout) % (NU64)(((NI) 1000))), ((NI) 1000000));
			tv.tv_nsec = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_35);
		}
		goto LA5_;
		LA7_: ;
		{
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_36;
			nimln_(458, "ioselectors_kqueue.nim");
			tv.tv_sec = ((long) 0);
			nimln_(459, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_36 = mulInt(timeout, ((NI) 1000000));
			tv.tv_nsec = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_36);
		}
		LA5_: ;
	}
	goto LA1_;
	LA3_: ;
	{
		nimln_(461, "ioselectors_kqueue.nim");
		ptv = NIM_NIL;
	}
	LA1_: ;
	nimln_(463, "ioselectors_kqueue.nim");
	{
		if (!(resultsLen_0 < maxres)) goto LA13_;
		nimln_(464, "ioselectors_kqueue.nim");
		maxres = resultsLen_0;
	}
	LA13_: ;
	nimln_(466, "ioselectors_kqueue.nim");
	count = ((NI) 0);
	nimln_(468, "ioselectors_kqueue.nim");
	T15_ = (int)0;
	T15_ = kevent((*s).kqFD, NIM_NIL, ((int) 0), (&resTable[(((NI) 0))- 0]), ((int)chckRange(maxres, ((int) (-2147483647 -1)), ((int) 2147483647))), ptv);
	count = ((NI) (T15_));
	nimln_(489, "ioselectors_kqueue.nim");
	{
		NI32 err;
		if (!(count < ((NI) 0))) goto LA18_;
		nimln_(490, "ioselectors_kqueue.nim");
		result = ((NI) 0);
		nimln_(491, "ioselectors_kqueue.nim");
		err = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
		nimln_(492, "ioselectors_kqueue.nim");
		{
			nimln_(398, "system.nim");
			nimln_(492, "ioselectors_kqueue.nim");
			if (!!((err == EINTR))) goto LA22_;
			nimln_(493, "ioselectors_kqueue.nim");
			raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(err);
		}
		LA22_: ;
	}
	goto LA16_;
	LA18_: ;
	{
		nimln_(494, "ioselectors_kqueue.nim");
		if (!(count == ((NI) 0))) goto LA25_;
		nimln_(495, "ioselectors_kqueue.nim");
		result = ((NI) 0);
	}
	goto LA16_;
	LA25_: ;
	{
		NI i;
		NI k;
		tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ* pkey;
		nimln_(497, "ioselectors_kqueue.nim");
		i = ((NI) 0);
		nimln_(498, "ioselectors_kqueue.nim");
		k = ((NI) 0);
		pkey = (tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ*)0;
		{
			nimln_(500, "ioselectors_kqueue.nim");
			while (1) {
				if (!(i < count)) goto LA29;
				{
					struct kevent* kevent_1;
					tyObject_ReadyKey_vOvPQEijZeFv1xAgbh5rNw rkey;
					NI TM_ln5vuDpFyDrAqQbYD2g52Q_41;
					NI TM_ln5vuDpFyDrAqQbYD2g52Q_42;
					nimln_(501, "ioselectors_kqueue.nim");
					if ((NU)(i) > (NU)(63)) raiseIndexError();
					kevent_1 = (&resTable[(i)- 0]);
					nimln_(502, "ioselectors_kqueue.nim");
					chckNil((void*)(&rkey));
					memset((void*)(&rkey), 0, sizeof(rkey));
					rkey.fd = ((NI) ((*kevent_1).ident));
					rkey.events = 0;
					nimln_(504, "ioselectors_kqueue.nim");
					{
						nimln_(398, "system.nim");
						nimln_(504, "ioselectors_kqueue.nim");
						if (!!(((NU16)((*kevent_1).flags & ((NI) 16384)) == ((NI) 0)))) goto LA33_;
						nimln_(505, "ioselectors_kqueue.nim");
						rkey.events = 128;
						nimln_(506, "ioselectors_kqueue.nim");
						rkey.errorCode = ((NI32)chckRange((*kevent_1).data, ((NI32) (-2147483647 -1)), ((NI32) 2147483647)));
					}
					LA33_: ;
					nimln_(508, "ioselectors_kqueue.nim");
					switch ((*kevent_1).filter) {
					case ((NI) -1):
					{
						nimln_(510, "ioselectors_kqueue.nim");
						if ((NU)((*kevent_1).ident) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
						pkey = (&(*s).fds->data[(*kevent_1).ident]);
						nimln_(511, "ioselectors_kqueue.nim");
						rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 0))%(sizeof(NU32)*8));
						nimln_(512, "ioselectors_kqueue.nim");
						{
							NU64 data;
							if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 6))&31U)))!=0)) goto LA38_;
							nimln_(513, "ioselectors_kqueue.nim");
							data = 0ULL;
							nimln_(514, "ioselectors_kqueue.nim");
							{
								NI T42_;
								NI32 err_2;
								nimln_(398, "system.nim");
								nimln_(514, "ioselectors_kqueue.nim");
								T42_ = (NI)0;
								T42_ = read(((int) ((*kevent_1).ident)), ((void*) ((&data))), ((NI) 8));
								if (!!((T42_ == ((NI) 8)))) goto LA43_;
								nimln_(516, "ioselectors_kqueue.nim");
								err_2 = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
								nimln_(517, "ioselectors_kqueue.nim");
								{
									NI TM_ln5vuDpFyDrAqQbYD2g52Q_37;
									if (!(err_2 == EAGAIN)) goto LA47_;
									nimln_(519, "ioselectors_kqueue.nim");
									TM_ln5vuDpFyDrAqQbYD2g52Q_37 = addInt(i, ((NI) 1));
									i = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_37);
									nimln_(520, "ioselectors_kqueue.nim");
									goto LA30;
								}
								goto LA45_;
								LA47_: ;
								{
									nimln_(522, "ioselectors_kqueue.nim");
									raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(err_2);
								}
								LA45_: ;
							}
							LA43_: ;
							nimln_(523, "ioselectors_kqueue.nim");
							rkey.events = 64;
						}
						LA38_: ;
					}
					break;
					case ((NI) -2):
					{
						nimln_(525, "ioselectors_kqueue.nim");
						if ((NU)((*kevent_1).ident) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
						pkey = (&(*s).fds->data[(*kevent_1).ident]);
						nimln_(526, "ioselectors_kqueue.nim");
						rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 1))%(sizeof(NU32)*8));
						nimln_(527, "ioselectors_kqueue.nim");
						rkey.events = 2;
					}
					break;
					case ((NI) -7):
					{
						nimln_(529, "ioselectors_kqueue.nim");
						if ((NU)((*kevent_1).ident) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
						pkey = (&(*s).fds->data[(*kevent_1).ident]);
						nimln_(530, "ioselectors_kqueue.nim");
						{
							NI TM_ln5vuDpFyDrAqQbYD2g52Q_38;
							if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 8))&31U)))!=0)) goto LA54_;
							nimln_(534, "ioselectors_kqueue.nim");
							TM_ln5vuDpFyDrAqQbYD2g52Q_38 = subInt((*s).count, ((NI) 1));
							(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_38);
							nimln_(536, "ioselectors_kqueue.nim");
							(*pkey).events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 9))%(sizeof(NU32)*8));
						}
						LA54_: ;
						nimln_(537, "ioselectors_kqueue.nim");
						rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 2))%(sizeof(NU32)*8));
					}
					break;
					case ((NI) -4):
					{
						nimln_(539, "ioselectors_kqueue.nim");
						if ((NU)((*kevent_1).ident) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
						pkey = (&(*s).fds->data[(*kevent_1).ident]);
						nimln_(540, "ioselectors_kqueue.nim");
						rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 5))%(sizeof(NU32)*8));
						nimln_(541, "ioselectors_kqueue.nim");
						{
							nimln_(398, "system.nim");
							nimln_(541, "ioselectors_kqueue.nim");
							if (!!(((NU32)((*kevent_1).fflags & ((NI) 1)) == ((NI) 0)))) goto LA59_;
							nimln_(542, "ioselectors_kqueue.nim");
							rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 11))%(sizeof(NU32)*8));
						}
						LA59_: ;
						nimln_(543, "ioselectors_kqueue.nim");
						{
							nimln_(398, "system.nim");
							nimln_(543, "ioselectors_kqueue.nim");
							if (!!(((NU32)((*kevent_1).fflags & ((NI) 2)) == ((NI) 0)))) goto LA63_;
							nimln_(544, "ioselectors_kqueue.nim");
							rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 10))%(sizeof(NU32)*8));
						}
						LA63_: ;
						nimln_(545, "ioselectors_kqueue.nim");
						{
							nimln_(398, "system.nim");
							nimln_(545, "ioselectors_kqueue.nim");
							if (!!(((NU32)((*kevent_1).fflags & ((NI) 4)) == ((NI) 0)))) goto LA67_;
							nimln_(546, "ioselectors_kqueue.nim");
							rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 12))%(sizeof(NU32)*8));
						}
						LA67_: ;
						nimln_(547, "ioselectors_kqueue.nim");
						{
							nimln_(398, "system.nim");
							nimln_(547, "ioselectors_kqueue.nim");
							if (!!(((NU32)((*kevent_1).fflags & ((NI) 8)) == ((NI) 0)))) goto LA71_;
							nimln_(548, "ioselectors_kqueue.nim");
							rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 13))%(sizeof(NU32)*8));
						}
						LA71_: ;
						nimln_(549, "ioselectors_kqueue.nim");
						{
							nimln_(398, "system.nim");
							nimln_(549, "ioselectors_kqueue.nim");
							if (!!(((NU32)((*kevent_1).fflags & ((NI) 16)) == ((NI) 0)))) goto LA75_;
							nimln_(550, "ioselectors_kqueue.nim");
							rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 14))%(sizeof(NU32)*8));
						}
						LA75_: ;
						nimln_(551, "ioselectors_kqueue.nim");
						{
							nimln_(398, "system.nim");
							nimln_(551, "ioselectors_kqueue.nim");
							if (!!(((NU32)((*kevent_1).fflags & ((NI) 32)) == ((NI) 0)))) goto LA79_;
							nimln_(552, "ioselectors_kqueue.nim");
							rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 15))%(sizeof(NU32)*8));
						}
						LA79_: ;
						nimln_(553, "ioselectors_kqueue.nim");
						{
							nimln_(398, "system.nim");
							nimln_(553, "ioselectors_kqueue.nim");
							if (!!(((NU32)((*kevent_1).fflags & ((NI) 64)) == ((NI) 0)))) goto LA83_;
							nimln_(554, "ioselectors_kqueue.nim");
							rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 16))%(sizeof(NU32)*8));
						}
						LA83_: ;
					}
					break;
					case ((NI) -6):
					{
						nimln_(556, "ioselectors_kqueue.nim");
						if ((NU)(((NI) (ptrdiff_t) ((*kevent_1).udata))) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
						pkey = (&(*s).fds->data[((NI) (ptrdiff_t) ((*kevent_1).udata))]);
						nimln_(557, "ioselectors_kqueue.nim");
						rkey.fd = ((NI) (ptrdiff_t) ((*kevent_1).udata));
						nimln_(558, "ioselectors_kqueue.nim");
						rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 3))%(sizeof(NU32)*8));
					}
					break;
					case ((NI) -5):
					{
						NI TM_ln5vuDpFyDrAqQbYD2g52Q_39;
						nimln_(560, "ioselectors_kqueue.nim");
						rkey.fd = ((NI) (ptrdiff_t) ((*kevent_1).udata));
						nimln_(561, "ioselectors_kqueue.nim");
						if ((NU)(((NI) (ptrdiff_t) ((*kevent_1).udata))) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
						pkey = (&(*s).fds->data[((NI) (ptrdiff_t) ((*kevent_1).udata))]);
						nimln_(565, "ioselectors_kqueue.nim");
						TM_ln5vuDpFyDrAqQbYD2g52Q_39 = subInt((*s).count, ((NI) 1));
						(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_39);
						nimln_(567, "ioselectors_kqueue.nim");
						(*pkey).events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 9))%(sizeof(NU32)*8));
						nimln_(568, "ioselectors_kqueue.nim");
						rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 4))%(sizeof(NU32)*8));
					}
					break;
					default:
					{
						nimln_(570, "ioselectors_kqueue.nim");
						{
							if (!NIM_FALSE) goto LA90_;
							raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_40));
						}
						LA90_: ;
					}
					break;
					}
					nimln_(572, "ioselectors_kqueue.nim");
					{
						nimln_(398, "system.nim");
						nimln_(572, "ioselectors_kqueue.nim");
						if (!!(((NU16)((*kevent_1).flags & ((NI) 32768)) == ((NI) 0)))) goto LA94_;
						nimln_(573, "ioselectors_kqueue.nim");
						{
							nimln_(398, "system.nim");
							nimln_(573, "ioselectors_kqueue.nim");
							if (!!(((*kevent_1).fflags == ((NI) 0)))) goto LA98_;
							nimln_(574, "ioselectors_kqueue.nim");
							rkey.errorCode = ((NI32)chckRange((*kevent_1).fflags, ((NI32) (-2147483647 -1)), ((NI32) 2147483647)));
						}
						goto LA96_;
						LA98_: ;
						{
							nimln_(579, "ioselectors_kqueue.nim");
							rkey.errorCode = ECONNRESET;
						}
						LA96_: ;
						nimln_(580, "ioselectors_kqueue.nim");
						rkey.events |= ((NU32)1)<<((((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 7))%(sizeof(NU32)*8));
					}
					LA94_: ;
					if ((NU)(k) >= (NU)(resultsLen_0)) raiseIndexError();
					nimln_(582, "ioselectors_kqueue.nim");
					results[k] = rkey;
					nimln_(583, "ioselectors_kqueue.nim");
					TM_ln5vuDpFyDrAqQbYD2g52Q_41 = addInt(k, ((NI) 1));
					k = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_41);
					nimln_(584, "ioselectors_kqueue.nim");
					TM_ln5vuDpFyDrAqQbYD2g52Q_42 = addInt(i, ((NI) 1));
					i = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_42);
				} LA30: ;
			} LA29: ;
		}
		nimln_(585, "ioselectors_kqueue.nim");
		result = k;
	}
	LA16_: ;
	popFrame();
	return result;
}

N_LIB_PRIVATE N_NIMCALL(void, unregister_FDXXvDPySoITcYL9br9c8f6A)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, NI fd) {
	NI fdi;
	tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ* pkey;
	tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA empty;
	nimfr_("unregister", "ioselectors_kqueue.nim");
	nimln_(374, "ioselectors_kqueue.nim");
	fdi = fd;
	nimln_(375, "ioselectors_kqueue.nim");
	{
		nimln_(160, "ioselectors_kqueue.nim");
		if (!((*s).maxFD <= fdi)) goto LA3_;
		nimln_(161, "ioselectors_kqueue.nim");
		raiseIOSelectorsError_o9b1ajHBhCZ9cfHDVe9aM1OwA(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_11));
	}
	LA3_: ;
	nimln_(376, "ioselectors_kqueue.nim");
	if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
	pkey = (&(*s).fds->data[fdi]);
	nimln_(377, "ioselectors_kqueue.nim");
	{
		NimStringDesc* T9_;
		NimStringDesc* T10_;
		if (!!(!(((*pkey).ident == ((NI) 0))))) goto LA7_;
		T9_ = (NimStringDesc*)0;
		T10_ = (NimStringDesc*)0;
		T10_ = nimIntToStr(fdi);
		T9_ = rawNewString(T10_->Sup.len + 68);
appendString(T9_, ((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_15));
appendString(T9_, T10_);
appendString(T9_, ((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_16));
		raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(T9_);
	}
	LA7_: ;
	nimln_(380, "ioselectors_kqueue.nim");
	{
		nimln_(398, "system.nim");
		nimln_(380, "ioselectors_kqueue.nim");
		if (!!(((*pkey).events == 0))) goto LA13_;
		nimln_(381, "ioselectors_kqueue.nim");
		{
			int length;
			NI T31_;
			nimln_(398, "system.nim");
			nimln_(381, "ioselectors_kqueue.nim");
			if (!!((((*pkey).events & 3) == 0))) goto LA17_;
			nimln_(382, "ioselectors_kqueue.nim");
			{
				struct kevent T23_;
				NI T24_;
				NI TM_ln5vuDpFyDrAqQbYD2g52Q_43;
				if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0)) goto LA21_;
				nimln_(206, "ioselectors_kqueue.nim");
				memset((void*)(&T23_), 0, sizeof(T23_));
				T23_.ident = ((NU) (fdi));
				T23_.filter = ((short) -1);
				T23_.flags = ((unsigned short) 2);
				T23_.fflags = ((unsigned int) 0);
				T23_.data = ((NI) 0);
				T23_.udata = NIM_NIL;
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
				T24_ = (*s).changes->Sup.len++;
				(*s).changes->data[T24_] = T23_;
				nimln_(384, "ioselectors_kqueue.nim");
				TM_ln5vuDpFyDrAqQbYD2g52Q_43 = subInt((*s).count, ((NI) 1));
				(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_43);
			}
			LA21_: ;
			nimln_(385, "ioselectors_kqueue.nim");
			{
				struct kevent T29_;
				NI T30_;
				NI TM_ln5vuDpFyDrAqQbYD2g52Q_44;
				if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0)) goto LA27_;
				nimln_(206, "ioselectors_kqueue.nim");
				memset((void*)(&T29_), 0, sizeof(T29_));
				T29_.ident = ((NU) (fdi));
				T29_.filter = ((short) -2);
				T29_.flags = ((unsigned short) 2);
				T29_.fflags = ((unsigned int) 0);
				T29_.data = ((NI) 0);
				T29_.udata = NIM_NIL;
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
				T30_ = (*s).changes->Sup.len++;
				(*s).changes->data[T30_] = T29_;
				nimln_(387, "ioselectors_kqueue.nim");
				TM_ln5vuDpFyDrAqQbYD2g52Q_44 = subInt((*s).count, ((NI) 1));
				(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_44);
			}
			LA27_: ;
			nimln_(213, "ioselectors_kqueue.nim");
			T31_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			length = ((int)chckRange(T31_, ((int) (-2147483647 -1)), ((int) 2147483647)));
			nimln_(389, "ioselectors_kqueue.nim");
			{
				nimln_(214, "ioselectors_kqueue.nim");
				if (!(((NI32) 0) < length)) goto LA34_;
				nimln_(215, "ioselectors_kqueue.nim");
				{
					int T38_;
					NI32 T41_;
					if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
					T38_ = (int)0;
					T38_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T38_ == ((NI32) -1))) goto LA39_;
					nimln_(217, "ioselectors_kqueue.nim");
					T41_ = (NI32)0;
					T41_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
					raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T41_);
				}
				LA39_: ;
				nimln_(218, "ioselectors_kqueue.nim");
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
			}
			LA34_: ;
		}
		goto LA15_;
		LA17_: ;
		{
			nimln_(390, "ioselectors_kqueue.nim");
			if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 2))&31U)))!=0)) goto LA43_;
			nimln_(391, "ioselectors_kqueue.nim");
			{
				struct kevent T49_;
				NI T50_;
				int length_2;
				NI T51_;
				NI TM_ln5vuDpFyDrAqQbYD2g52Q_45;
				nimln_(1212, "system.nim");
				nimln_(391, "ioselectors_kqueue.nim");
				if (!!((((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 9))&31U)))!=0))) goto LA47_;
				nimln_(206, "ioselectors_kqueue.nim");
				memset((void*)(&T49_), 0, sizeof(T49_));
				T49_.ident = ((NU) (fdi));
				T49_.filter = ((short) -7);
				T49_.flags = ((unsigned short) 2);
				T49_.fflags = ((unsigned int) 0);
				T49_.data = ((NI) 0);
				T49_.udata = NIM_NIL;
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
				T50_ = (*s).changes->Sup.len++;
				(*s).changes->data[T50_] = T49_;
				nimln_(213, "ioselectors_kqueue.nim");
				T51_ = ((*s).changes ? (*s).changes->Sup.len : 0);
				length_2 = ((int)chckRange(T51_, ((int) (-2147483647 -1)), ((int) 2147483647)));
				nimln_(394, "ioselectors_kqueue.nim");
				{
					nimln_(214, "ioselectors_kqueue.nim");
					if (!(((NI32) 0) < length_2)) goto LA54_;
					nimln_(215, "ioselectors_kqueue.nim");
					{
						int T58_;
						NI32 T61_;
						if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
						T58_ = (int)0;
						T58_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length_2, NIM_NIL, ((int) 0), NIM_NIL);
						if (!(T58_ == ((NI32) -1))) goto LA59_;
						nimln_(217, "ioselectors_kqueue.nim");
						T61_ = (NI32)0;
						T61_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
						raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T61_);
					}
					LA59_: ;
					nimln_(218, "ioselectors_kqueue.nim");
					(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
				}
				LA54_: ;
				nimln_(395, "ioselectors_kqueue.nim");
				TM_ln5vuDpFyDrAqQbYD2g52Q_45 = subInt((*s).count, ((NI) 1));
				(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_45);
			}
			LA47_: ;
			nimln_(396, "ioselectors_kqueue.nim");
			{
				int T64_;
				NI32 T67_;
				nimln_(398, "system.nim");
				nimln_(396, "ioselectors_kqueue.nim");
				T64_ = (int)0;
				T64_ = close(((int)chckRange((*pkey).ident, ((int) (-2147483647 -1)), ((int) 2147483647))));
				if (!!((T64_ == ((NI32) 0)))) goto LA65_;
				nimln_(397, "ioselectors_kqueue.nim");
				T67_ = (NI32)0;
				T67_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
				raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T67_);
			}
			LA65_: ;
		}
		goto LA15_;
		LA43_: ;
		{
			sigset_t nmask;
			sigset_t omask;
			int signal_1;
			int T71_;
			int T72_;
			int T73_;
			struct kevent T80_;
			NI T81_;
			int length_3;
			NI T82_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_46;
			nimln_(398, "ioselectors_kqueue.nim");
			if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 3))&31U)))!=0)) goto LA69_;
			memset((void*)(&nmask), 0, sizeof(nmask));
			memset((void*)(&omask), 0, sizeof(omask));
			nimln_(400, "ioselectors_kqueue.nim");
			signal_1 = ((int)chckRange((*pkey).param, ((int) (-2147483647 -1)), ((int) 2147483647)));
			nimln_(401, "ioselectors_kqueue.nim");
			T71_ = (int)0;
			T71_ = sigemptyset((&nmask));
			T71_;
			nimln_(402, "ioselectors_kqueue.nim");
			T72_ = (int)0;
			T72_ = sigemptyset((&omask));
			T72_;
			nimln_(403, "ioselectors_kqueue.nim");
			T73_ = (int)0;
			T73_ = sigaddset((&nmask), signal_1);
			T73_;
			nimln_(302, "selectors.nim");
			{
				int T76_;
				NI32 T79_;
				T76_ = (int)0;
				T76_ = sigprocmask(SIG_UNBLOCK, (&nmask), (&omask));
				if (!(T76_ == ((NI32) -1))) goto LA77_;
				nimln_(303, "selectors.nim");
				T79_ = (NI32)0;
				T79_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
				raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T79_);
			}
			LA77_: ;
			nimln_(405, "ioselectors_kqueue.nim");
			signal(signal_1, ((tyProc_lfH2drpqP9aSEAAjWgrYv8Q) 0));
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T80_), 0, sizeof(T80_));
			T80_.ident = ((NU) ((*pkey).param));
			T80_.filter = ((short) -6);
			T80_.flags = ((unsigned short) 2);
			T80_.fflags = ((unsigned int) 0);
			T80_.data = ((NI) 0);
			T80_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T81_ = (*s).changes->Sup.len++;
			(*s).changes->data[T81_] = T80_;
			nimln_(213, "ioselectors_kqueue.nim");
			T82_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			length_3 = ((int)chckRange(T82_, ((int) (-2147483647 -1)), ((int) 2147483647)));
			nimln_(408, "ioselectors_kqueue.nim");
			{
				nimln_(214, "ioselectors_kqueue.nim");
				if (!(((NI32) 0) < length_3)) goto LA85_;
				nimln_(215, "ioselectors_kqueue.nim");
				{
					int T89_;
					NI32 T92_;
					if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
					T89_ = (int)0;
					T89_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length_3, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T89_ == ((NI32) -1))) goto LA90_;
					nimln_(217, "ioselectors_kqueue.nim");
					T92_ = (NI32)0;
					T92_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
					raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T92_);
				}
				LA90_: ;
				nimln_(218, "ioselectors_kqueue.nim");
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
			}
			LA85_: ;
			nimln_(409, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_46 = subInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_46);
			nimln_(410, "ioselectors_kqueue.nim");
			{
				int T95_;
				NI32 T98_;
				nimln_(398, "system.nim");
				nimln_(410, "ioselectors_kqueue.nim");
				T95_ = (int)0;
				T95_ = close(((int)chckRange((*pkey).ident, ((int) (-2147483647 -1)), ((int) 2147483647))));
				if (!!((T95_ == ((NI32) 0)))) goto LA96_;
				nimln_(411, "ioselectors_kqueue.nim");
				T98_ = (NI32)0;
				T98_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
				raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T98_);
			}
			LA96_: ;
		}
		goto LA15_;
		LA69_: ;
		{
			nimln_(412, "ioselectors_kqueue.nim");
			if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 4))&31U)))!=0)) goto LA100_;
			nimln_(413, "ioselectors_kqueue.nim");
			{
				struct kevent T106_;
				NI T107_;
				int length_4;
				NI T108_;
				NI TM_ln5vuDpFyDrAqQbYD2g52Q_47;
				nimln_(1212, "system.nim");
				nimln_(413, "ioselectors_kqueue.nim");
				if (!!((((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 9))&31U)))!=0))) goto LA104_;
				nimln_(206, "ioselectors_kqueue.nim");
				memset((void*)(&T106_), 0, sizeof(T106_));
				T106_.ident = ((NU) ((*pkey).param));
				T106_.filter = ((short) -5);
				T106_.flags = ((unsigned short) 2);
				T106_.fflags = ((unsigned int) 0);
				T106_.data = ((NI) 0);
				T106_.udata = NIM_NIL;
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
				T107_ = (*s).changes->Sup.len++;
				(*s).changes->data[T107_] = T106_;
				nimln_(213, "ioselectors_kqueue.nim");
				T108_ = ((*s).changes ? (*s).changes->Sup.len : 0);
				length_4 = ((int)chckRange(T108_, ((int) (-2147483647 -1)), ((int) 2147483647)));
				nimln_(416, "ioselectors_kqueue.nim");
				{
					nimln_(214, "ioselectors_kqueue.nim");
					if (!(((NI32) 0) < length_4)) goto LA111_;
					nimln_(215, "ioselectors_kqueue.nim");
					{
						int T115_;
						NI32 T118_;
						if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
						T115_ = (int)0;
						T115_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length_4, NIM_NIL, ((int) 0), NIM_NIL);
						if (!(T115_ == ((NI32) -1))) goto LA116_;
						nimln_(217, "ioselectors_kqueue.nim");
						T118_ = (NI32)0;
						T118_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
						raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T118_);
					}
					LA116_: ;
					nimln_(218, "ioselectors_kqueue.nim");
					(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
				}
				LA111_: ;
				nimln_(417, "ioselectors_kqueue.nim");
				TM_ln5vuDpFyDrAqQbYD2g52Q_47 = subInt((*s).count, ((NI) 1));
				(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_47);
			}
			LA104_: ;
			nimln_(418, "ioselectors_kqueue.nim");
			{
				int T121_;
				NI32 T124_;
				nimln_(398, "system.nim");
				nimln_(418, "ioselectors_kqueue.nim");
				T121_ = (int)0;
				T121_ = close(((int)chckRange((*pkey).ident, ((int) (-2147483647 -1)), ((int) 2147483647))));
				if (!!((T121_ == ((NI32) 0)))) goto LA122_;
				nimln_(419, "ioselectors_kqueue.nim");
				T124_ = (NI32)0;
				T124_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
				raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T124_);
			}
			LA122_: ;
		}
		goto LA15_;
		LA100_: ;
		{
			struct kevent T128_;
			NI T129_;
			int length_5;
			NI T130_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_48;
			nimln_(420, "ioselectors_kqueue.nim");
			if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 5))&31U)))!=0)) goto LA126_;
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T128_), 0, sizeof(T128_));
			T128_.ident = ((NU) (fdi));
			T128_.filter = ((short) -4);
			T128_.flags = ((unsigned short) 2);
			T128_.fflags = ((unsigned int) 0);
			T128_.data = ((NI) 0);
			T128_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T129_ = (*s).changes->Sup.len++;
			(*s).changes->data[T129_] = T128_;
			nimln_(213, "ioselectors_kqueue.nim");
			T130_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			length_5 = ((int)chckRange(T130_, ((int) (-2147483647 -1)), ((int) 2147483647)));
			nimln_(423, "ioselectors_kqueue.nim");
			{
				nimln_(214, "ioselectors_kqueue.nim");
				if (!(((NI32) 0) < length_5)) goto LA133_;
				nimln_(215, "ioselectors_kqueue.nim");
				{
					int T137_;
					NI32 T140_;
					if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
					T137_ = (int)0;
					T137_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length_5, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T137_ == ((NI32) -1))) goto LA138_;
					nimln_(217, "ioselectors_kqueue.nim");
					T140_ = (NI32)0;
					T140_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
					raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T140_);
				}
				LA138_: ;
				nimln_(218, "ioselectors_kqueue.nim");
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
			}
			LA133_: ;
			nimln_(424, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_48 = subInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_48);
		}
		goto LA15_;
		LA126_: ;
		{
			struct kevent T144_;
			NI T145_;
			int length_6;
			NI T146_;
			NI TM_ln5vuDpFyDrAqQbYD2g52Q_49;
			nimln_(425, "ioselectors_kqueue.nim");
			if (!(((*pkey).events &(1U<<((NU)(((tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg) 6))&31U)))!=0)) goto LA142_;
			nimln_(206, "ioselectors_kqueue.nim");
			memset((void*)(&T144_), 0, sizeof(T144_));
			T144_.ident = ((NU) (fdi));
			T144_.filter = ((short) -1);
			T144_.flags = ((unsigned short) 2);
			T144_.fflags = ((unsigned int) 0);
			T144_.data = ((NI) 0);
			T144_.udata = NIM_NIL;
			(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
			T145_ = (*s).changes->Sup.len++;
			(*s).changes->data[T145_] = T144_;
			nimln_(213, "ioselectors_kqueue.nim");
			T146_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			length_6 = ((int)chckRange(T146_, ((int) (-2147483647 -1)), ((int) 2147483647)));
			nimln_(428, "ioselectors_kqueue.nim");
			{
				nimln_(214, "ioselectors_kqueue.nim");
				if (!(((NI32) 0) < length_6)) goto LA149_;
				nimln_(215, "ioselectors_kqueue.nim");
				{
					int T153_;
					NI32 T156_;
					if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
					T153_ = (int)0;
					T153_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length_6, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T153_ == ((NI32) -1))) goto LA154_;
					nimln_(217, "ioselectors_kqueue.nim");
					T156_ = (NI32)0;
					T156_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
					raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T156_);
				}
				LA154_: ;
				nimln_(218, "ioselectors_kqueue.nim");
				(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
			}
			LA149_: ;
			nimln_(429, "ioselectors_kqueue.nim");
			TM_ln5vuDpFyDrAqQbYD2g52Q_49 = subInt((*s).count, ((NI) 1));
			(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_49);
		}
		goto LA15_;
		LA142_: ;
		LA15_: ;
	}
	LA13_: ;
	memset((void*)(&empty), 0, sizeof(empty));
	nimln_(133, "ioselectors_kqueue.nim");
	(*pkey).ident = ((NI) 0);
	nimln_(134, "ioselectors_kqueue.nim");
	(*pkey).events = 0;
	nimln_(135, "ioselectors_kqueue.nim");
	genericSeqAssign((&(*pkey).data.readList), empty.readList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	genericSeqAssign((&(*pkey).data.writeList), empty.writeList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	popFrame();
}

static N_INLINE(NI, getUnique_GbtpxJ9a1px9cRFswYIdc1GAselectors)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s) {
	NI result;
	int T1_;
	nimfr_("getUnique", "ioselectors_kqueue.nim");
	result = (NI)0;
	nimln_(79, "ioselectors_kqueue.nim");
	T1_ = (int)0;
	T1_ = fcntl((*s).sock, F_DUPFD, (*s).sock);
	result = ((NI) (T1_));
	nimln_(80, "ioselectors_kqueue.nim");
	{
		NI32 T6_;
		if (!(result == ((NI) -1))) goto LA4_;
		nimln_(81, "ioselectors_kqueue.nim");
		T6_ = (NI32)0;
		T6_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
		raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T6_);
	}
	LA4_: ;
	popFrame();
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NI, registerTimer_y2moAIvNXB4rIB1KLoVSRQ)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, NI timeout, NIM_BOOL oneshot, tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA data) {
	NI result;
	NI fdi;
	tySet_tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg events;
	unsigned short flags;
	NI T14_;
	tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ* skey;
	struct kevent T20_;
	NI T21_;
	int length;
	NI T22_;
	NI TM_ln5vuDpFyDrAqQbYD2g52Q_50;
	nimfr_("registerTimer", "ioselectors_kqueue.nim");
	result = (NI)0;
	nimln_(270, "ioselectors_kqueue.nim");
	fdi = getUnique_GbtpxJ9a1px9cRFswYIdc1GAselectors(s);
	nimln_(271, "ioselectors_kqueue.nim");
	{
		nimln_(160, "ioselectors_kqueue.nim");
		if (!((*s).maxFD <= fdi)) goto LA3_;
		nimln_(161, "ioselectors_kqueue.nim");
		raiseIOSelectorsError_o9b1ajHBhCZ9cfHDVe9aM1OwA(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_11));
	}
	LA3_: ;
	nimln_(272, "ioselectors_kqueue.nim");
	{
		if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
		if (!!(((*s).fds->data[fdi].ident == ((NI) 0)))) goto LA7_;
		raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_12));
	}
	LA7_: ;
	nimln_(274, "ioselectors_kqueue.nim");
	{
		if (!oneshot) goto LA11_;
		events = 260;
	}
	goto LA9_;
	LA11_: ;
	{
		events = 4;
	}
	LA9_: ;
	nimln_(275, "ioselectors_kqueue.nim");
	T14_ = (NI)0;
	{
		if (!oneshot) goto LA17_;
		T14_ = ((NI) 17);
	}
	goto LA15_;
	LA17_: ;
	{
		T14_ = ((NI) 1);
	}
	LA15_: ;
	flags = ((unsigned short) (T14_));
	nimln_(282, "selectors.nim");
	if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
	skey = (&(*s).fds->data[fdi]);
	nimln_(277, "ioselectors_kqueue.nim");
	(*skey).ident = fdi;
	(*skey).events = events;
	(*skey).param = ((NI) 0);
	nimln_(286, "selectors.nim");
	genericSeqAssign((&(*skey).data.readList), data.readList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	genericSeqAssign((&(*skey).data.writeList), data.writeList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	nimln_(206, "ioselectors_kqueue.nim");
	memset((void*)(&T20_), 0, sizeof(T20_));
	T20_.ident = ((NU) (fdi));
	T20_.filter = ((short) -7);
	T20_.flags = flags;
	T20_.fflags = ((unsigned int) 0);
	T20_.data = ((NI) (((int)chckRange(timeout, ((int) (-2147483647 -1)), ((int) 2147483647)))));
	T20_.udata = NIM_NIL;
	(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
	T21_ = (*s).changes->Sup.len++;
	(*s).changes->data[T21_] = T20_;
	nimln_(213, "ioselectors_kqueue.nim");
	T22_ = ((*s).changes ? (*s).changes->Sup.len : 0);
	length = ((int)chckRange(T22_, ((int) (-2147483647 -1)), ((int) 2147483647)));
	nimln_(285, "ioselectors_kqueue.nim");
	{
		nimln_(214, "ioselectors_kqueue.nim");
		if (!(((NI32) 0) < length)) goto LA25_;
		nimln_(215, "ioselectors_kqueue.nim");
		{
			int T29_;
			NI32 T32_;
			if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
			T29_ = (int)0;
			T29_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length, NIM_NIL, ((int) 0), NIM_NIL);
			if (!(T29_ == ((NI32) -1))) goto LA30_;
			nimln_(217, "ioselectors_kqueue.nim");
			T32_ = (NI32)0;
			T32_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
			raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T32_);
		}
		LA30_: ;
		nimln_(218, "ioselectors_kqueue.nim");
		(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
	}
	LA25_: ;
	nimln_(287, "ioselectors_kqueue.nim");
	TM_ln5vuDpFyDrAqQbYD2g52Q_50 = addInt((*s).count, ((NI) 1));
	(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_50);
	nimln_(288, "ioselectors_kqueue.nim");
	result = fdi;
	popFrame();
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NI, registerSignal_drKvJvQgH2f9cCO89cQUnGbQ)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, NI signal_0, tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA data) {
	NI result;
	NI fdi;
	tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ* skey;
	sigset_t nmask;
	sigset_t omask;
	int T9_;
	int T10_;
	int T11_;
	struct kevent T18_;
	NI T19_;
	int length;
	NI T20_;
	NI TM_ln5vuDpFyDrAqQbYD2g52Q_51;
	nimfr_("registerSignal", "ioselectors_kqueue.nim");
	result = (NI)0;
	nimln_(292, "ioselectors_kqueue.nim");
	fdi = getUnique_GbtpxJ9a1px9cRFswYIdc1GAselectors(s);
	nimln_(293, "ioselectors_kqueue.nim");
	{
		nimln_(160, "ioselectors_kqueue.nim");
		if (!((*s).maxFD <= fdi)) goto LA3_;
		nimln_(161, "ioselectors_kqueue.nim");
		raiseIOSelectorsError_o9b1ajHBhCZ9cfHDVe9aM1OwA(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_11));
	}
	LA3_: ;
	nimln_(294, "ioselectors_kqueue.nim");
	{
		if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
		if (!!(((*s).fds->data[fdi].ident == ((NI) 0)))) goto LA7_;
		raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_12));
	}
	LA7_: ;
	nimln_(282, "selectors.nim");
	if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
	skey = (&(*s).fds->data[fdi]);
	nimln_(296, "ioselectors_kqueue.nim");
	(*skey).ident = fdi;
	(*skey).events = 8;
	(*skey).param = signal_0;
	nimln_(286, "selectors.nim");
	genericSeqAssign((&(*skey).data.readList), data.readList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	genericSeqAssign((&(*skey).data.writeList), data.writeList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	memset((void*)(&nmask), 0, sizeof(nmask));
	memset((void*)(&omask), 0, sizeof(omask));
	nimln_(298, "ioselectors_kqueue.nim");
	T9_ = (int)0;
	T9_ = sigemptyset((&nmask));
	T9_;
	nimln_(299, "ioselectors_kqueue.nim");
	T10_ = (int)0;
	T10_ = sigemptyset((&omask));
	T10_;
	nimln_(300, "ioselectors_kqueue.nim");
	T11_ = (int)0;
	T11_ = sigaddset((&nmask), ((int)chckRange(signal_0, ((int) (-2147483647 -1)), ((int) 2147483647))));
	T11_;
	nimln_(294, "selectors.nim");
	{
		int T14_;
		NI32 T17_;
		T14_ = (int)0;
		T14_ = sigprocmask(SIG_BLOCK, (&nmask), (&omask));
		if (!(T14_ == ((NI32) -1))) goto LA15_;
		nimln_(295, "selectors.nim");
		T17_ = (NI32)0;
		T17_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
		raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T17_);
	}
	LA15_: ;
	nimln_(303, "ioselectors_kqueue.nim");
	signal(((int)chckRange(signal_0, ((int) (-2147483647 -1)), ((int) 2147483647))), ((tyProc_lfH2drpqP9aSEAAjWgrYv8Q) 1));
	nimln_(206, "ioselectors_kqueue.nim");
	memset((void*)(&T18_), 0, sizeof(T18_));
	T18_.ident = ((NU) (signal_0));
	T18_.filter = ((short) -6);
	T18_.flags = ((unsigned short) 1);
	T18_.fflags = ((unsigned int) 0);
	T18_.data = ((NI) 0);
	T18_.udata = ((void*) (fdi));
	(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
	T19_ = (*s).changes->Sup.len++;
	(*s).changes->data[T19_] = T18_;
	nimln_(213, "ioselectors_kqueue.nim");
	T20_ = ((*s).changes ? (*s).changes->Sup.len : 0);
	length = ((int)chckRange(T20_, ((int) (-2147483647 -1)), ((int) 2147483647)));
	nimln_(309, "ioselectors_kqueue.nim");
	{
		nimln_(214, "ioselectors_kqueue.nim");
		if (!(((NI32) 0) < length)) goto LA23_;
		nimln_(215, "ioselectors_kqueue.nim");
		{
			int T27_;
			NI32 T30_;
			if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
			T27_ = (int)0;
			T27_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length, NIM_NIL, ((int) 0), NIM_NIL);
			if (!(T27_ == ((NI32) -1))) goto LA28_;
			nimln_(217, "ioselectors_kqueue.nim");
			T30_ = (NI32)0;
			T30_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
			raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T30_);
		}
		LA28_: ;
		nimln_(218, "ioselectors_kqueue.nim");
		(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
	}
	LA23_: ;
	nimln_(311, "ioselectors_kqueue.nim");
	TM_ln5vuDpFyDrAqQbYD2g52Q_51 = addInt((*s).count, ((NI) 1));
	(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_51);
	nimln_(312, "ioselectors_kqueue.nim");
	result = fdi;
	popFrame();
	return result;
}

N_LIB_PRIVATE N_NIMCALL(NI, registerProcess_dTzh9aCnYwofDLGlI9cUc63g)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, NI pid, tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA data) {
	NI result;
	NI fdi;
	unsigned short kflags;
	tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ* skey;
	struct kevent T9_;
	NI T10_;
	int length;
	NI T11_;
	NI TM_ln5vuDpFyDrAqQbYD2g52Q_52;
	nimfr_("registerProcess", "ioselectors_kqueue.nim");
	result = (NI)0;
	nimln_(316, "ioselectors_kqueue.nim");
	fdi = getUnique_GbtpxJ9a1px9cRFswYIdc1GAselectors(s);
	nimln_(317, "ioselectors_kqueue.nim");
	{
		nimln_(160, "ioselectors_kqueue.nim");
		if (!((*s).maxFD <= fdi)) goto LA3_;
		nimln_(161, "ioselectors_kqueue.nim");
		raiseIOSelectorsError_o9b1ajHBhCZ9cfHDVe9aM1OwA(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_11));
	}
	LA3_: ;
	nimln_(318, "ioselectors_kqueue.nim");
	{
		if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
		if (!!(((*s).fds->data[fdi].ident == ((NI) 0)))) goto LA7_;
		raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_12));
	}
	LA7_: ;
	nimln_(320, "ioselectors_kqueue.nim");
	kflags = ((unsigned short) 17);
	nimln_(282, "selectors.nim");
	if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
	skey = (&(*s).fds->data[fdi]);
	nimln_(321, "ioselectors_kqueue.nim");
	(*skey).ident = fdi;
	(*skey).events = 272;
	(*skey).param = pid;
	nimln_(286, "selectors.nim");
	genericSeqAssign((&(*skey).data.readList), data.readList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	genericSeqAssign((&(*skey).data.writeList), data.writeList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	nimln_(206, "ioselectors_kqueue.nim");
	memset((void*)(&T9_), 0, sizeof(T9_));
	T9_.ident = ((NU) (pid));
	T9_.filter = ((short) -5);
	T9_.flags = kflags;
	T9_.fflags = ((NU32) IL64(2147483648));
	T9_.data = ((NI) 0);
	T9_.udata = ((void*) (fdi));
	(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
	T10_ = (*s).changes->Sup.len++;
	(*s).changes->data[T10_] = T9_;
	nimln_(213, "ioselectors_kqueue.nim");
	T11_ = ((*s).changes ? (*s).changes->Sup.len : 0);
	length = ((int)chckRange(T11_, ((int) (-2147483647 -1)), ((int) 2147483647)));
	nimln_(327, "ioselectors_kqueue.nim");
	{
		nimln_(214, "ioselectors_kqueue.nim");
		if (!(((NI32) 0) < length)) goto LA14_;
		nimln_(215, "ioselectors_kqueue.nim");
		{
			int T18_;
			NI32 T21_;
			if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
			T18_ = (int)0;
			T18_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length, NIM_NIL, ((int) 0), NIM_NIL);
			if (!(T18_ == ((NI32) -1))) goto LA19_;
			nimln_(217, "ioselectors_kqueue.nim");
			T21_ = (NI32)0;
			T21_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
			raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T21_);
		}
		LA19_: ;
		nimln_(218, "ioselectors_kqueue.nim");
		(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
	}
	LA14_: ;
	nimln_(329, "ioselectors_kqueue.nim");
	TM_ln5vuDpFyDrAqQbYD2g52Q_52 = addInt((*s).count, ((NI) 1));
	(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_52);
	nimln_(330, "ioselectors_kqueue.nim");
	result = fdi;
	popFrame();
	return result;
}

N_LIB_PRIVATE N_NIMCALL(void, registerEvent_cDBlJuFgtmIfPSvBNk6IYQ)(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA* s, tyObject_SelectEventImpl_eylAhlrQHMWWh02yDRri0g* ev, tyObject_AsyncData_hOYUN4IOpj9adMwn6W7S2VA data) {
	NI fdi;
	tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ* skey;
	struct kevent T5_;
	NI T6_;
	int length;
	NI T7_;
	NI TM_ln5vuDpFyDrAqQbYD2g52Q_54;
	nimfr_("registerEvent", "ioselectors_kqueue.nim");
	nimln_(333, "ioselectors_kqueue.nim");
	fdi = ((NI) ((*ev).rfd));
	nimln_(334, "ioselectors_kqueue.nim");
	{
		if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
		if (!!(((*s).fds->data[fdi].ident == ((NI) 0)))) goto LA3_;
		raiseAssert_PpfSiTIeNpMAb9a5o6SglJw_2(((NimStringDesc*) &TM_ln5vuDpFyDrAqQbYD2g52Q_53));
	}
	LA3_: ;
	nimln_(282, "selectors.nim");
	if ((NU)(fdi) >= (NU)((*s).fds->Sup.len)) raiseIndexError();
	skey = (&(*s).fds->data[fdi]);
	nimln_(335, "ioselectors_kqueue.nim");
	(*skey).ident = fdi;
	(*skey).events = 64;
	(*skey).param = ((NI) 0);
	nimln_(286, "selectors.nim");
	genericSeqAssign((&(*skey).data.readList), data.readList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	genericSeqAssign((&(*skey).data.writeList), data.writeList, (&NTI_lBAKjtL5n9bzoWNSpC1Vu3A_));
	nimln_(206, "ioselectors_kqueue.nim");
	memset((void*)(&T5_), 0, sizeof(T5_));
	T5_.ident = ((NU) (fdi));
	T5_.filter = ((short) -1);
	T5_.flags = ((unsigned short) 1);
	T5_.fflags = ((unsigned int) 0);
	T5_.data = ((NI) 0);
	T5_.udata = NIM_NIL;
	(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) incrSeqV2(&((*s).changes)->Sup, sizeof(struct kevent));
	T6_ = (*s).changes->Sup.len++;
	(*s).changes->data[T6_] = T5_;
	nimln_(213, "ioselectors_kqueue.nim");
	T7_ = ((*s).changes ? (*s).changes->Sup.len : 0);
	length = ((int)chckRange(T7_, ((int) (-2147483647 -1)), ((int) 2147483647)));
	nimln_(340, "ioselectors_kqueue.nim");
	{
		nimln_(214, "ioselectors_kqueue.nim");
		if (!(((NI32) 0) < length)) goto LA10_;
		nimln_(215, "ioselectors_kqueue.nim");
		{
			int T14_;
			NI32 T17_;
			if ((NU)(((NI) 0)) >= (NU)((*s).changes->Sup.len)) raiseIndexError();
			T14_ = (int)0;
			T14_ = kevent((*s).kqFD, (&(*s).changes->data[((NI) 0)]), length, NIM_NIL, ((int) 0), NIM_NIL);
			if (!(T14_ == ((NI32) -1))) goto LA15_;
			nimln_(217, "ioselectors_kqueue.nim");
			T17_ = (NI32)0;
			T17_ = osLastError_tNPXXFl9cb3BG0pJKzUn9bew();
			raiseIOSelectorsError_PDJjb10jFW9ce9bI0d9bdexrQ(T17_);
		}
		LA15_: ;
		nimln_(218, "ioselectors_kqueue.nim");
		(*s).changes = (tySequence_aFT14fmnUl0dbEzr23F30g*) setLengthSeq(&((*s).changes)->Sup, sizeof(struct kevent), ((NI) 0));
	}
	LA10_: ;
	nimln_(342, "ioselectors_kqueue.nim");
	TM_ln5vuDpFyDrAqQbYD2g52Q_54 = addInt((*s).count, ((NI) 1));
	(*s).count = (NI)(TM_ln5vuDpFyDrAqQbYD2g52Q_54);
	popFrame();
}
NIM_EXTERNC N_NOINLINE(void, stdlib_selectorsInit000)(void) {
	nimfr_("selectors", "selectors.nim");
	popFrame();
}

NIM_EXTERNC N_NOINLINE(void, stdlib_selectorsDatInit000)(void) {
static TNimNode* TM_ln5vuDpFyDrAqQbYD2g52Q_5[6];
static TNimNode* TM_ln5vuDpFyDrAqQbYD2g52Q_6[4];
static TNimNode* TM_ln5vuDpFyDrAqQbYD2g52Q_7[17];
NI TM_ln5vuDpFyDrAqQbYD2g52Q_9;
static char* NIM_CONST TM_ln5vuDpFyDrAqQbYD2g52Q_8[17] = {
"Read", 
"Write", 
"Timer", 
"Signal", 
"Process", 
"Vnode", 
"User", 
"Error", 
"Oneshot", 
"Finished", 
"VnodeWrite", 
"VnodeDelete", 
"VnodeExtend", 
"VnodeAttrib", 
"VnodeLink", 
"VnodeRename", 
"VnodeRevoke"};
static TNimNode TM_ln5vuDpFyDrAqQbYD2g52Q_0[32];
NTI_0onfiGw9bxynoOBJJC01SAg_.size = sizeof(tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg);
NTI_0onfiGw9bxynoOBJJC01SAg_.kind = 17;
NTI_0onfiGw9bxynoOBJJC01SAg_.base = (&NTI_bAvOj2UcojKN87yAQLs0aw_);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[0].len = 0; TM_ln5vuDpFyDrAqQbYD2g52Q_0[0].kind = 2;
NTI_0onfiGw9bxynoOBJJC01SAg_.node = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[0];
NTI_yREHAUxoe4I2puy9cJ9cMatg_.size = sizeof(tyObject_IOSelectorsException_0onfiGw9bxynoOBJJC01SAg*);
NTI_yREHAUxoe4I2puy9cJ9cMatg_.kind = 22;
NTI_yREHAUxoe4I2puy9cJ9cMatg_.base = (&NTI_0onfiGw9bxynoOBJJC01SAg_);
NTI_yREHAUxoe4I2puy9cJ9cMatg_.marker = Marker_tyRef_yREHAUxoe4I2puy9cJ9cMatg;
NTI_VF2QWbk9cEn13YFg9btPwWLA_.size = sizeof(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA);
NTI_VF2QWbk9cEn13YFg9btPwWLA_.kind = 18;
NTI_VF2QWbk9cEn13YFg9btPwWLA_.base = 0;
TM_ln5vuDpFyDrAqQbYD2g52Q_5[0] = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[2];
TM_ln5vuDpFyDrAqQbYD2g52Q_0[2].kind = 1;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[2].offset = offsetof(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA, kqFD);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[2].typ = (&NTI_nlCscttRCss70IBTyuBqnA_);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[2].name = "kqFD";
TM_ln5vuDpFyDrAqQbYD2g52Q_5[1] = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[3];
TM_ln5vuDpFyDrAqQbYD2g52Q_0[3].kind = 1;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[3].offset = offsetof(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA, maxFD);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[3].typ = (&NTI_rR5Bzr1D5krxoo1NcNyeMA_);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[3].name = "maxFD";
TM_ln5vuDpFyDrAqQbYD2g52Q_5[2] = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[4];
NTI_aFT14fmnUl0dbEzr23F30g_.size = sizeof(tySequence_aFT14fmnUl0dbEzr23F30g*);
NTI_aFT14fmnUl0dbEzr23F30g_.kind = 24;
NTI_aFT14fmnUl0dbEzr23F30g_.base = (&NTI_9cG9coEVt8bUEuxUupPPZigQ_);
NTI_aFT14fmnUl0dbEzr23F30g_.flags = 2;
NTI_aFT14fmnUl0dbEzr23F30g_.marker = Marker_tySequence_aFT14fmnUl0dbEzr23F30g;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[4].kind = 1;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[4].offset = offsetof(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA, changes);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[4].typ = (&NTI_aFT14fmnUl0dbEzr23F30g_);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[4].name = "changes";
TM_ln5vuDpFyDrAqQbYD2g52Q_5[3] = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[5];
NTI_6oh6PoZxxmRrkez9bmwfPdQ_.size = sizeof(tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ);
NTI_6oh6PoZxxmRrkez9bmwfPdQ_.kind = 18;
NTI_6oh6PoZxxmRrkez9bmwfPdQ_.base = 0;
TM_ln5vuDpFyDrAqQbYD2g52Q_6[0] = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[7];
TM_ln5vuDpFyDrAqQbYD2g52Q_0[7].kind = 1;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[7].offset = offsetof(tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ, ident);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[7].typ = (&NTI_rR5Bzr1D5krxoo1NcNyeMA_);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[7].name = "ident";
TM_ln5vuDpFyDrAqQbYD2g52Q_6[1] = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[8];
NTI_nI40bZzTyYVrl763dZ9aHDg_.size = sizeof(tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg);
NTI_nI40bZzTyYVrl763dZ9aHDg_.kind = 14;
NTI_nI40bZzTyYVrl763dZ9aHDg_.base = 0;
NTI_nI40bZzTyYVrl763dZ9aHDg_.flags = 3;
for (TM_ln5vuDpFyDrAqQbYD2g52Q_9 = 0; TM_ln5vuDpFyDrAqQbYD2g52Q_9 < 17; TM_ln5vuDpFyDrAqQbYD2g52Q_9++) {
TM_ln5vuDpFyDrAqQbYD2g52Q_0[TM_ln5vuDpFyDrAqQbYD2g52Q_9+9].kind = 1;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[TM_ln5vuDpFyDrAqQbYD2g52Q_9+9].offset = TM_ln5vuDpFyDrAqQbYD2g52Q_9;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[TM_ln5vuDpFyDrAqQbYD2g52Q_9+9].name = TM_ln5vuDpFyDrAqQbYD2g52Q_8[TM_ln5vuDpFyDrAqQbYD2g52Q_9];
TM_ln5vuDpFyDrAqQbYD2g52Q_7[TM_ln5vuDpFyDrAqQbYD2g52Q_9] = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[TM_ln5vuDpFyDrAqQbYD2g52Q_9+9];
}
TM_ln5vuDpFyDrAqQbYD2g52Q_0[26].len = 17; TM_ln5vuDpFyDrAqQbYD2g52Q_0[26].kind = 2; TM_ln5vuDpFyDrAqQbYD2g52Q_0[26].sons = &TM_ln5vuDpFyDrAqQbYD2g52Q_7[0];
NTI_nI40bZzTyYVrl763dZ9aHDg_.node = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[26];
NTI_YIRsZrDT89buh37M5yeUgng_.size = sizeof(tySet_tyEnum_Event_nI40bZzTyYVrl763dZ9aHDg);
NTI_YIRsZrDT89buh37M5yeUgng_.kind = 19;
NTI_YIRsZrDT89buh37M5yeUgng_.base = (&NTI_nI40bZzTyYVrl763dZ9aHDg_);
NTI_YIRsZrDT89buh37M5yeUgng_.flags = 3;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[27].len = 0; TM_ln5vuDpFyDrAqQbYD2g52Q_0[27].kind = 0;
NTI_YIRsZrDT89buh37M5yeUgng_.node = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[27];
TM_ln5vuDpFyDrAqQbYD2g52Q_0[8].kind = 1;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[8].offset = offsetof(tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ, events);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[8].typ = (&NTI_YIRsZrDT89buh37M5yeUgng_);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[8].name = "events";
TM_ln5vuDpFyDrAqQbYD2g52Q_6[2] = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[28];
TM_ln5vuDpFyDrAqQbYD2g52Q_0[28].kind = 1;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[28].offset = offsetof(tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ, param);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[28].typ = (&NTI_rR5Bzr1D5krxoo1NcNyeMA_);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[28].name = "param";
TM_ln5vuDpFyDrAqQbYD2g52Q_6[3] = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[29];
TM_ln5vuDpFyDrAqQbYD2g52Q_0[29].kind = 1;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[29].offset = offsetof(tyObject_SelectorKey_6oh6PoZxxmRrkez9bmwfPdQ, data);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[29].typ = (&NTI_hOYUN4IOpj9adMwn6W7S2VA_);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[29].name = "data";
TM_ln5vuDpFyDrAqQbYD2g52Q_0[6].len = 4; TM_ln5vuDpFyDrAqQbYD2g52Q_0[6].kind = 2; TM_ln5vuDpFyDrAqQbYD2g52Q_0[6].sons = &TM_ln5vuDpFyDrAqQbYD2g52Q_6[0];
NTI_6oh6PoZxxmRrkez9bmwfPdQ_.node = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[6];
NTI_lKsVWjYqlRD7eN7MeIt2PQ_.size = sizeof(tySequence_lKsVWjYqlRD7eN7MeIt2PQ*);
NTI_lKsVWjYqlRD7eN7MeIt2PQ_.kind = 24;
NTI_lKsVWjYqlRD7eN7MeIt2PQ_.base = (&NTI_6oh6PoZxxmRrkez9bmwfPdQ_);
NTI_lKsVWjYqlRD7eN7MeIt2PQ_.marker = Marker_tySequence_lKsVWjYqlRD7eN7MeIt2PQ;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[5].kind = 1;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[5].offset = offsetof(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA, fds);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[5].typ = (&NTI_lKsVWjYqlRD7eN7MeIt2PQ_);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[5].name = "fds";
TM_ln5vuDpFyDrAqQbYD2g52Q_5[4] = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[30];
TM_ln5vuDpFyDrAqQbYD2g52Q_0[30].kind = 1;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[30].offset = offsetof(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA, count);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[30].typ = (&NTI_rR5Bzr1D5krxoo1NcNyeMA_);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[30].name = "count";
TM_ln5vuDpFyDrAqQbYD2g52Q_5[5] = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[31];
TM_ln5vuDpFyDrAqQbYD2g52Q_0[31].kind = 1;
TM_ln5vuDpFyDrAqQbYD2g52Q_0[31].offset = offsetof(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA, sock);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[31].typ = (&NTI_nlCscttRCss70IBTyuBqnA_);
TM_ln5vuDpFyDrAqQbYD2g52Q_0[31].name = "sock";
TM_ln5vuDpFyDrAqQbYD2g52Q_0[1].len = 6; TM_ln5vuDpFyDrAqQbYD2g52Q_0[1].kind = 2; TM_ln5vuDpFyDrAqQbYD2g52Q_0[1].sons = &TM_ln5vuDpFyDrAqQbYD2g52Q_5[0];
NTI_VF2QWbk9cEn13YFg9btPwWLA_.node = &TM_ln5vuDpFyDrAqQbYD2g52Q_0[1];
NTI_eV1HoGAGYVaJgQ5BCEf67g_.size = sizeof(tyObject_SelectorImpl_VF2QWbk9cEn13YFg9btPwWLA*);
NTI_eV1HoGAGYVaJgQ5BCEf67g_.kind = 22;
NTI_eV1HoGAGYVaJgQ5BCEf67g_.base = (&NTI_VF2QWbk9cEn13YFg9btPwWLA_);
NTI_eV1HoGAGYVaJgQ5BCEf67g_.marker = Marker_tyRef_eV1HoGAGYVaJgQ5BCEf67g;
}

